<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>yeobi-easy for JNE (í™•ì¥íŒ)</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        /* Pretendard CDN */
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        /* SUIT CDN */
        @import url('https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/static/woff2/SUIT.css');
        
        /* Font Family Definitions */
        :root {
            --font-suit: 'SUIT', sans-serif;
            --font-pretendard: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
            --color-teal: #00BFA5;
            --color-bg-card: #F7F9FB;
            --color-text-main: #191F28;
            --color-text-sub: #8B95A1;
        }

        body { 
            font-family: var(--font-pretendard);
            background-color: #FFFFFF;
            color: var(--color-text-main);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            overscroll-behavior-y: none;
        }

        /* Typography Utilities */
        .font-suit { font-family: var(--font-suit); }
        .font-pretendard { font-family: var(--font-pretendard); }
        
        /* Gmarket Sans Font */
        @font-face {
            font-family: 'GmarketSans';
            font-weight: 700;
            font-display: swap;
            src: local('Gmarket Sans Bold'), url('./GmarketSansBold.otf') format('opentype');
        }
        @font-face {
            font-family: 'GmarketSans';
            font-weight: 500;
            font-display: swap;
            src: local('Gmarket Sans Medium'), url('./GmarketSansMedium.otf') format('opentype');
        }
        @font-face {
            font-family: 'GmarketSans';
            font-weight: 300;
            font-display: swap;
            src: local('Gmarket Sans Light'), url('./GmarketSansLight.otf') format('opentype');
        }
        .font-gmarket { font-family: 'GmarketSans', sans-serif; }
        
        .text-teal-startup { color: var(--color-teal); }
        .bg-teal-startup { background-color: var(--color-teal); }
        .bg-card-startup { background-color: var(--color-bg-card); }

        /* Custom Styles */
        .main-wrapper {
            max-width: 480px;
            margin: 0 auto;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-color: #FFFFFF;
        }

        .input-group {
            transition: all 0.2s ease;
            border: 1px solid transparent;
        }
        .input-group:focus-within {
            border-color: var(--color-teal);
            background-color: #FFFFFF;
            box-shadow: 0 0 0 4px rgba(0, 191, 165, 0.1);
        }

        .btn-primary {
            background-color: var(--color-teal);
            color: white;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .btn-primary:active:not(:disabled) {
            transform: scale(0.98);
            background-color: #00A891;
        }
        .btn-primary:disabled {
            background-color: #A0D8D0;
            cursor: not-allowed;
            transform: none;
        }

        .result-card {
            background-color: var(--color-bg-card);
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.02);
            position: relative;
            transform-style: preserve-3d;
            touch-action: pan-y pinch-zoom;
        }

        /* Animations */
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-up { animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        
        @keyframes slideUpModal {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        .animate-slide-up-modal { animation: slideUpModal 0.3s cubic-bezier(0.16, 1, 0.3, 1) forwards; }

        @keyframes flipOut {
            0% { transform: rotateY(0deg); opacity: 1; }
            100% { transform: rotateY(-90deg); opacity: 0; }
        }
        @keyframes flipIn {
            0% { transform: rotateY(90deg); opacity: 0; }
            100% { transform: rotateY(0deg); opacity: 1; }
        }

        .animate-flip-out {
            animation: flipOut 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            transform-origin: left center;
        }
        .animate-flip-in {
            animation: flipIn 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
            transform-origin: left center;
        }

        @keyframes pulse-scale {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .animate-pulse-scale { animation: pulse-scale 2s ease-in-out infinite; }

        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-thumb { background-color: #E5E8EB; border-radius: 4px; }

        @keyframes float-boat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(1px) rotate(1deg); }
            50% { transform: translateY(-2px) rotate(0deg); }
            75% { transform: translateY(1px) rotate(-1deg); }
        }
        .ship-body {
            animation: float-boat 3s ease-in-out infinite;
            transform-origin: center bottom;
        }
        
        @keyframes wiggle {
            0%, 100% { transform: rotate(-10deg); }
            50% { transform: rotate(10deg); }
        }
        .icon-wiggle {
            display: inline-block;
            animation: wiggle 1.5s ease-in-out infinite;
            transform-origin: bottom center;
            margin-left: 4px;
            font-style: normal;
        }
        
        input.ship-fare-input {
            text-align: right;
            border-bottom: 1px solid #E5E8EB;
            background-color: transparent;
            width: 80px;
            font-family: var(--font-suit);
            font-weight: 700;
            color: #191F28;
            outline: none;
            padding-bottom: 2px;
            transition: all 0.2s;
            -moz-appearance: textfield;
            appearance: none;
        }
        input.ship-fare-input::-webkit-outer-spin-button,
        input.ship-fare-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input.ship-fare-input:focus { border-color: var(--color-teal); }
        input.ship-fare-input::placeholder { color: #E5E8EB; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ìœ í‹¸ë¦¬í‹° ë° ë°ì´í„° ---
        const CHOSUNG = ["ã„±","ã„²","ã„´","ã„·","ã„¸","ã„¹","ã…","ã…‚","ã…ƒ","ã……","ã…†","ã…‡","ã…ˆ","ã…‰","ã…Š","ã…‹","ã…Œ","ã…","ã…"];
        const JUNGSUNG = ["ã…","ã…","ã…‘","ã…’","ã…“","ã…”","ã…•","ã…–","ã…—","ã…˜","ã…™","ã…š","ã…›","ã…œ","ã…","ã…","ã…Ÿ","ã… ","ã…¡","ã…¢","ã…£"];
        const JONGSUNG = ["","ã„±","ã„²","ã„³","ã„´","ã„µ","ã„¶","ã„·","ã„¹","ã„º","ã„»","ã„¼","ã„½","ã„¾","ã„¿","ã…€","ã…","ã…‚","ã…„","ã……","ã…†","ã…‡","ã…ˆ","ã…Š","ã…‹","ã…Œ","ã…","ã…"];
        const COMPLEX_JAMO_MAP = {'ã„³':'ã„±ã……','ã„µ':'ã„´ã…ˆ','ã„¶':'ã„´ã…','ã„º':'ã„¹ã„±','ã„»':'ã„¹ã…','ã„¼':'ã„¹ã…‚','ã„½':'ã„¹ã……','ã„¾':'ã„¹ã…Œ','ã„¿':'ã„¹ã…','ã…€':'ã„¹ã…','ã…„':'ã…‚ã……'};

        const getChosung = (str) => {
            if (!str) return "";
            let result = "";
            for (let i = 0; i < str.length; i++) {
                const code = str.charCodeAt(i) - 44032;
                if (code > -1 && code < 11172) result += CHOSUNG[Math.floor(code / 588)];
                else result += str.charAt(i);
            }
            return result;
        };
        const resolveComplexJamo = (str) => !str ? "" : str.split('').map(char => COMPLEX_JAMO_MAP[char] || char).join('');
        const disassembleHangul = (str) => {
            if (!str) return "";
            let result = "";
            for (let i = 0; i < str.length; i++) {
                const charCode = str.charCodeAt(i);
                if (charCode >= 44032 && charCode <= 55203) {
                    const code = charCode - 44032;
                    result += CHOSUNG[Math.floor(code / 588)] + JUNGSUNG[Math.floor((code % 588) / 28)] + JONGSUNG[code % 28];
                } else result += str.charAt(i);
            }
            return result;
        };
        const levenshtein = (a, b) => {
            if (a.length === 0) return b.length;
            if (b.length === 0) return a.length;
            const matrix = [];
            for (let i = 0; i <= b.length; i++) matrix[i] = [i];
            for (let j = 0; j <= a.length; j++) matrix[0][j] = j;
            for (let i = 1; i <= b.length; i++) {
                for (let j = 1; j <= a.length; j++) {
                    if (b.charAt(i - 1) === a.charAt(j - 1)) matrix[i][j] = matrix[i - 1][j - 1];
                    else matrix[i][j] = Math.min(matrix[i - 1][j - 1] + 1, matrix[i][j - 1] + 1, matrix[i - 1][j] + 1);
                }
            }
            return matrix[b.length][a.length];
        };
        const normalize = (text) => text ? text.replace(/(ì‹œ|êµ°|êµ¬|ì|ë©´|í„°ë¯¸ë„|ì¢…í•©|ê³µìš©|\s)/g, "") : "";
        const fmt = (num) => num ? num.toLocaleString() : '0';

        // ì „êµ­ ë‹¨ìœ„ ì•„ì´ì½˜ í™•ì¥
        const REGION_ICONS = {
            "ê´‘ì£¼": "ğŸ‰", "ëª©í¬": "âš“", "ì—¬ìˆ˜": "ğŸ¤", "ìˆœì²œ": "ğŸŒ¾", "ë‚˜ì£¼": "ğŸ", "ê´‘ì–‘": "âš½", "ë‹´ì–‘": "ğŸ‹", "ê³¡ì„±": "ğŸš‚", "êµ¬ë¡€": "ğŸ»", "ê³ í¥": "ğŸš€", "ë³´ì„±": "ğŸµ", "í™”ìˆœ": "ğŸª¨", "ì¥í¥": "ğŸ„", "ê°•ì§„": "ğŸº", "í•´ë‚¨": "ğŸ¦–", "ì˜ì•”": "ğŸï¸", "ë¬´ì•ˆ": "ğŸ§…", "í•¨í‰": "ğŸ¦‹", "ì˜ê´‘": "ğŸŸ", "ì¥ì„±": "ğŸ‚", "ì™„ë„": "ğŸš", "ì§„ë„": "ğŸ•", "ì‹ ì•ˆ": "ğŸª½", "ë‚¨ì•…": "ğŸ›ï¸", "ì§€ë„": "ğŸ§‚", "ì••í•´": "ğŸ™", "ì¦ë„": "ğŸš²", "ì„ì": "ğŸŒ·", "ìì€": "ğŸš", "ì•ˆì¢Œ": "ğŸ’œ", "íŒ”ê¸ˆ": "ğŸŒ", "ì•”íƒœ": "ğŸŒ‰", "ë¹„ê¸ˆ": "ğŸ’–", "ë„ì´ˆ": "ğŸŒ¿", "í‘ì‚°": "ğŸŸ", "í•˜ì˜": "ğŸ•Šï¸", "ì‹ ì˜": "ğŸ§‚", "ì¥ì‚°": "ğŸ”ï¸",
            "ì„œìš¸": "ğŸ™ï¸", "ì„¼íŠ¸ëŸ´": "ğŸ™ï¸", "ë™ì„œìš¸": "ğŸ™ï¸", "ë¶€ì‚°": "ğŸŒŠ", "ë¶€ì‚°ì‚¬ìƒ": "ğŸŒŠ", "ëŒ€êµ¬": "ğŸ", "ì„œëŒ€êµ¬": "ğŸ", "ì¸ì²œ": "âœˆï¸", "ëŒ€ì „": "ğŸ§¬", "ìš¸ì‚°": "ğŸš¢", "ì„¸ì¢…": "ğŸ¢", "ì œì£¼": "ğŸŠ",
            "ìˆ˜ì›": "ğŸ°", "ì„±ë‚¨": "ğŸ’»", "ê³ ì–‘": "ğŸŒ¸", "ìš©ì¸": "ğŸ¢", "ì°½ì›": "âš™ï¸", "ì²­ì£¼": "ğŸ“š", "ì²œì•ˆ": "ğŸŒ°", "ì „ì£¼": "ğŸ", "í¬í•­": "ğŸ¦€", "ê¹€í•´": "ğŸº", "ì¶˜ì²œ": "ğŸ›¶", "ì›ì£¼": "ğŸŒ³", "ê°•ë¦‰": "â˜•", "ì•ˆë™": "ğŸ­", "ê²½ì£¼": "ğŸ””", "êµ¬ë¯¸": "ğŸ“º", "ì•ˆì‚°": "ğŸ­", "í†µì˜": "ğŸ¦ª", "ì§„ì£¼": "ğŸ°"
        };

        // ì§€ë¦¬ì  ìœ„ë„/ê²½ë„ ë°ì´í„° (ì¼ì§ì„  ìµœì  ê²½ìœ ì§€ ì‚°ì¶œìš©)
        const CITY_COORDS = {
            "ì„œìš¸": [37.5665, 126.9780], "ì„¼íŠ¸ëŸ´": [37.5665, 126.9780], "ë™ì„œìš¸": [37.5665, 126.9780],
            "ë¶€ì‚°": [35.1796, 129.0756], "ë¶€ì‚°ì‚¬ìƒ": [35.1620, 128.9850], "ëŒ€êµ¬": [35.8714, 128.6014],
            "ì„œëŒ€êµ¬": [35.8714, 128.6014], "ì¸ì²œ": [37.4563, 126.7052], "ëŒ€ì „": [36.3504, 127.3845],
            "ê´‘ì£¼": [35.1595, 126.8526], "ìš¸ì‚°": [35.5384, 129.3114], "ì„¸ì¢…": [36.4800, 127.2890],
            "ì œì£¼": [33.4996, 126.5312], "ìˆ˜ì›": [37.2636, 127.0286], "ì„±ë‚¨": [37.4200, 127.1265],
            "ê³ ì–‘": [37.6584, 126.8320], "ìš©ì¸": [37.2410, 127.1775], "ì°½ì›": [35.2280, 128.6811],
            "ì²­ì£¼": [36.6424, 127.4890], "ì²œì•ˆ": [36.8151, 127.1139], "ì „ì£¼": [35.8242, 127.1480],
            "í¬í•­": [36.0190, 129.3435], "ê¹€í•´": [35.2285, 128.8894], "ì¶˜ì²œ": [37.8813, 127.7298],
            "ì›ì£¼": [37.3422, 127.9202], "ê°•ë¦‰": [37.7518, 128.8760], "ì•ˆë™": [36.5684, 128.7294],
            "ê²½ì£¼": [35.8562, 129.2247], "êµ¬ë¯¸": [36.1195, 128.3441], "ì•ˆì‚°": [37.3219, 126.8308],
            "í†µì˜": [34.8544, 128.4332], "ì§„ì£¼": [35.1802, 128.1076],
            // Jeonnam
            "ëª©í¬": [34.8118, 126.3922], "ì—¬ìˆ˜": [34.7604, 127.6622], "ìˆœì²œ": [34.9506, 127.4872],
            "ê´‘ì–‘": [34.9407, 127.6959], "ë‚˜ì£¼": [35.0158, 126.7108], "ë‹´ì–‘": [35.3211, 126.9882],
            "ê³¡ì„±": [35.2820, 127.2923], "êµ¬ë¡€": [35.2025, 127.4627], "ê³ í¥": [34.6111, 127.2726],
            "ë³´ì„±": [34.7714, 127.0797], "í™”ìˆœ": [35.0645, 126.9865], "ì¥í¥": [34.6817, 126.9070],
            "ê°•ì§„": [34.6420, 126.7672], "í•´ë‚¨": [34.5708, 126.5990], "ì˜ì•”": [34.8001, 126.6968],
            "ë¬´ì•ˆ": [34.9904, 126.4789], "í•¨í‰": [35.0658, 126.5165], "ì˜ê´‘": [35.2772, 126.5120],
            "ì¥ì„±": [35.3019, 126.7848], "ì™„ë„": [34.3110, 126.7551], "ì§„ë„": [34.4868, 126.2635],
            "ë‚¨ì•…": [34.8166, 126.4625], "ì‹ ì•ˆ": [34.8336, 126.1090],
            // Shinan islands
            "ì§€ë„": [35.0687, 126.2163], "ì••í•´": [34.8336, 126.3090], "ì¦ë„": [34.9922, 126.1557], 
            "ì„ì": [35.0863, 126.0963], "ìì€": [34.8872, 126.0285], "ì•ˆì¢Œ": [34.7214, 126.1264], 
            "íŒ”ê¸ˆ": [34.7836, 126.1518], "ì•”íƒœ": [34.8291, 126.1158], "ë¹„ê¸ˆ": [34.7479, 125.9257], 
            "ë„ì´ˆ": [34.7176, 125.9458], "í‘ì‚°": [34.6853, 125.4371], "í•˜ì˜": [34.5888, 126.0253], 
            "ì‹ ì˜": [34.5459, 126.0357], "ì¥ì‚°": [34.6214, 126.1432]
        };

        // ì (P)ê³¼ ì„ ë¶„(A-B) ì‚¬ì´ì˜ ìµœë‹¨ê±°ë¦¬ ê³„ì‚° í•¨ìˆ˜
        const getDistanceToSegment = (px, py, ax, ay, bx, by) => {
            const l2 = (bx - ax) ** 2 + (by - ay) ** 2;
            if (l2 === 0) return Math.sqrt((px - ax) ** 2 + (py - ay) ** 2);
            let t = ((px - ax) * (bx - ax) + (py - ay) * (by - ay)) / l2;
            t = Math.max(0, Math.min(1, t));
            const cx = ax + t * (bx - ax);
            const cy = ay + t * (by - ay);
            return Math.sqrt((px - cx) ** 2 + (py - cy) ** 2);
        };

        const SHINAN_REGIONS = { connected: ["ì§€ë„", "ì••í•´", "ì¦ë„", "ì„ì", "ìì€", "ì•ˆì¢Œ", "íŒ”ê¸ˆ", "ì•”íƒœ"], islands: ["ë¹„ê¸ˆ", "ë„ì´ˆ", "í‘ì‚°", "í•˜ì˜", "ì‹ ì˜", "ì¥ì‚°"] };
        const ALL_SHINAN_SUB_AREAS = [...SHINAN_REGIONS.connected, ...SHINAN_REGIONS.islands];
        const ALL_SHINAN_AREAS = ["ì‹ ì•ˆ", "ì••í•´", ...SHINAN_REGIONS.connected, ...SHINAN_REGIONS.islands];
        const GROUP_3000 = ["ì•ˆì¢Œ", "ìì€", "ì•”íƒœ", "íŒ”ê¸ˆ"];
        const GROUP_6000 = ["ì„ì", "ì§€ë„", "ì¦ë„"];
        const SHIP_ONLY_AREAS = ["ì¥ì‚°", "ì‹ ì˜", "í•˜ì˜", "ë„ì´ˆ", "ë¹„ê¸ˆ", "í‘ì‚°"];
        const SHINAN_ZONES = [['ì••í•´'], ['ìì€', 'ì•”íƒœ', 'íŒ”ê¸ˆ', 'ì•ˆì¢Œ'], ['ì¦ë„', 'ì§€ë„', 'ì„ì'], ['ì¥ì‚°'], ['í•˜ì˜'], ['ì‹ ì˜'], ['ë¹„ê¸ˆ', 'ë„ì´ˆ'], ['í‘ì‚°']];
        const getShinanZoneIndex = (city) => SHINAN_ZONES.findIndex(zone => zone.includes(city));
        
        // ì „êµ­ ë‹¨ìœ„ ì •ë ¬ ë¡œì§
        const getCityRank = (name) => {
            if (name === "ì‹ ì•ˆ") return 0;
            if (["ì„œìš¸", "ì„¼íŠ¸ëŸ´", "ë™ì„œìš¸", "ë¶€ì‚°", "ë¶€ì‚°ì‚¬ìƒ", "ëŒ€êµ¬", "ì„œëŒ€êµ¬", "ì¸ì²œ", "ëŒ€ì „", "ê´‘ì£¼", "ìš¸ì‚°", "ì„¸ì¢…", "ì œì£¼"].includes(name)) return 1;
            if (["ëª©í¬", "ì—¬ìˆ˜", "ìˆœì²œ", "ë‚˜ì£¼", "ê´‘ì–‘", "ë‹´ì–‘", "ê³¡ì„±", "êµ¬ë¡€", "ê³ í¥", "ë³´ì„±", "í™”ìˆœ", "ì¥í¥", "ê°•ì§„", "í•´ë‚¨", "ì˜ì•”", "ë¬´ì•ˆ", "í•¨í‰", "ì˜ê´‘", "ì¥ì„±", "ì™„ë„", "ì§„ë„", "ë‚¨ì•…"].includes(name)) return 2;
            return 3;
        };

        const Icons = {
            MapPin: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>,
            Search: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>,
            ArrowRight: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>,
            Info: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>,
            X: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>,
            Ship: (props) => (
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props} className={`ship-container ${props.className || ''}`}>
                    <g className="ship-body"><path d="M3 14l3 7h12l3-7Z" /><path d="M7 14V8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v6" /><path d="M12 3v3" /></g>
                    <path className="ship-wave" d="M2 17c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1" strokeOpacity="0.6" />
                </svg>
            ),
            Globe: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10"/><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"/><path d="M2 12h20"/></svg>,
            Database: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></svg>,
            ChevronRight: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m9 18 6-6-6-6"/></svg>,
            ChevronLeft: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m15 18-6-6 6-6"/></svg>,
            Calculator: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></svg>
        };

        const Toggle = ({ checked, onChange }) => (
            <button 
                onClick={() => onChange(!checked)}
                className={`w-11 h-6 rounded-full transition-colors relative ${checked ? 'bg-teal-500' : 'bg-gray-200'}`}
            >
                <span className={`absolute top-1 left-1 bg-white w-4 h-4 rounded-full transition-transform ${checked ? 'translate-x-5' : 'translate-x-0'}`} />
            </button>
        );

        const AutocompleteInput = ({ value, onChange, onSelect, placeholder, label, cityList, onEnter, onShowModal }) => {
            const [suggestions, setSuggestions] = useState([]);
            const [showSuggestions, setShowSuggestions] = useState(false);
            const [activeIndex, setActiveIndex] = useState(-1);
            const inputRef = useRef(null);

            useEffect(() => {
                const inputVal = (value || '').trim();
                if (!inputVal || cityList.includes(inputVal)) { setSuggestions([]); return; }
                
                const resolved = resolveComplexJamo(inputVal);
                const isChosung = /^[ã„±-ã…]+$/.test(resolved);
                if (isChosung && resolved.length < 2) { setSuggestions([]); return; }

                const inputCho = isChosung ? resolved : getChosung(inputVal);
                let exact = cityList.filter(city => {
                    if (isChosung && ALL_SHINAN_SUB_AREAS.includes(city) && city !== 'ì‹ ì•ˆ') return false;
                    return city.includes(inputVal) || getChosung(city).includes(inputCho);
                });

                let fuzzy = [];
                if (exact.length === 0 && !isChosung) {
                    const inputJamo = disassembleHangul(inputVal);
                    cityList.forEach(city => {
                        const dist = levenshtein(inputJamo, disassembleHangul(city));
                        if (dist <= 1) fuzzy.push({city, dist});
                    });
                    fuzzy.sort((a,b) => a.dist - b.dist);
                    fuzzy = fuzzy.map(i => i.city);
                }

                let final = [...new Set([...exact, ...fuzzy])];
                final.sort((a, b) => getCityRank(a) - getCityRank(b) || a.localeCompare(b));
                
                // ê²€ìƒ‰ ê²°ê³¼ê°€ 3ê°œ ì´ìƒì¼ ê²½ìš° ì¦‰ì‹œ íŒì—…(ëª¨ë‹¬) í˜¸ì¶œ ë° ë“œë¡­ë‹¤ìš´ ìˆ¨ê¹€ ì²˜ë¦¬
                if (final.length >= 3) {
                    onShowModal(final);
                    setShowSuggestions(false);
                    setSuggestions([]);
                    if (inputRef.current) inputRef.current.blur();
                } else {
                    setSuggestions(final);
                }
            }, [value, cityList]);

            const handleSelect = (city) => {
                onSelect(city);
                setShowSuggestions(false);
                setSuggestions([]);
            };

            const handleKeyDown = (e) => {
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    if (suggestions.length > 0) setActiveIndex(prev => (prev < suggestions.length - 1 ? prev + 1 : 0));
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    if (suggestions.length > 0) setActiveIndex(prev => (prev > 0 ? prev - 1 : suggestions.length - 1));
                } else if (e.key === 'Enter') {
                    const trimmedValue = (value || '').trim();
                    if (cityList.includes(trimmedValue)) {
                        onSelect(trimmedValue); 
                        if(onEnter) onEnter();  
                        setShowSuggestions(false);
                        e.target.blur();
                        return;
                    }

                    if (activeIndex >= 0) handleSelect(suggestions[activeIndex]);
                    else if (suggestions.length > 0) handleSelect(suggestions[0]);
                    else onSelect(value);
                    if(onEnter) onEnter();
                    setShowSuggestions(false);
                    e.target.blur();
                }
            };

            return (
                <div className={`relative group ${showSuggestions ? 'z-50' : 'z-20'}`}>
                    <div className="input-group bg-card-startup rounded-2xl p-4 flex items-center gap-3">
                        <Icons.MapPin className="text-gray-400 group-focus-within:text-teal-startup transition-colors" size={20} />
                        <div className="flex-1">
                            <label className="block text-xs font-semibold text-gray-400 mb-1 font-pretendard tracking-wide">{label}</label>
                            <input
                                ref={inputRef}
                                type="text"
                                className="w-full bg-transparent outline-none font-suit font-bold text-gray-800 text-lg placeholder-gray-300"
                                placeholder={placeholder}
                                value={value || ''}
                                onChange={e => { onChange(e.target.value); setShowSuggestions(true); }}
                                onFocus={() => setShowSuggestions(true)}
                                onBlur={() => setTimeout(() => setShowSuggestions(false), 200)}
                                onKeyDown={handleKeyDown}
                                autoComplete="off"
                            />
                        </div>
                    </div>
                    {showSuggestions && suggestions.length > 0 && (
                        <div className="absolute left-0 right-0 top-full mt-2 bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden z-50">
                            <ul className="custom-scroll max-h-48 overflow-y-auto">
                                {suggestions.map((city, idx) => (
                                    <li 
                                        key={city}
                                        onClick={() => handleSelect(city)}
                                        onMouseEnter={() => setActiveIndex(idx)}
                                        className={`px-5 py-3 text-sm font-medium cursor-pointer flex justify-between items-center ${idx === activeIndex ? 'bg-teal-50 text-teal-700' : 'text-gray-600 hover:bg-gray-50'}`}
                                    >
                                        <span className="font-pretendard">{city}</span>
                                        <span className="text-lg">{REGION_ICONS[city]}</span>
                                    </li>
                                ))}
                            </ul>
                        </div>
                    )}
                </div>
            );
        };

        const App = () => {
            const [origin, setOrigin] = useState('');
            const [destination, setDestination] = useState('');
            const [result, setResult] = useState(null);
            const [busDataState, setBusDataState] = useState({});
            const [modalState, setModalState] = useState({ type: null, data: [] });
            const [availableCities, setAvailableCities] = useState([]);
            const [showDetail, setShowDetail] = useState(false);
            const [isLoading, setIsLoading] = useState(false); // ë¡œë”© ìƒíƒœ ì¶”ê°€
            
            // Transport & Deductions States
            const [shipFare, setShipFare] = useState(0); 
            const [customTransport, setCustomTransport] = useState('');
            const [intraDeductions, setIntraDeductions] = useState({ shortTime: false, govVehicle: false });
            
            // Swipe handlers ref
            const touchStartX = useRef(null);
            const touchEndX = useRef(null);

            const onTouchStart = (e) => { touchStartX.current = e.targetTouches[0].clientX; };
            const onTouchMove = (e) => { touchEndX.current = e.targetTouches[0].clientX; };
            const onTouchEnd = () => {
                if (!touchStartX.current || !touchEndX.current) return;
                const distance = touchStartX.current - touchEndX.current;
                const isLeftSwipe = distance > 50;
                const isRightSwipe = distance < -50;

                if (isLeftSwipe && !showDetail && result) setShowDetail(true);
                if (isRightSwipe && showDetail) setShowDetail(false);

                touchStartX.current = null;
                touchEndX.current = null;
            };
            
            // Deduction Modal State
            const [activeModal, setActiveModal] = useState(null); 
            const [deductions, setDeductions] = useState({
                gov_vehicle: false,
                meal_1: false,
                meal_2: false,
                meal_3: false,
                meal_half: false,
                transport_proof: false,
                transport_gov_vehicle: false,
                transport_passenger: false
            });

            // Modal Content Data
            const MODAL_CONTENT = {
                daily: {
                    title: "ì¼ë¹„",
                    desc: `ì¶œì¥ì§€(${destination || 'ë„ì°©ì§€ëª…'}) ë‚´ì—ì„œ ì†Œìš”ë˜ëŠ” êµí†µë¹„, í†µì‹ ë¹„, ìŒë£Œë¹„ ë“±`,
                    items: [ { id: 'gov_vehicle', label: "ê³µìš©ì°¨ëŸ‰(ê´€ìš©ì°¨, ì„ì°¨ì°¨ëŸ‰) ì´ìš© : ì¼ë¹„ 1/2 ê°ì•¡" } ]
                },
                meal: {
                    title: "ì‹ë¹„",
                    desc: "ì‹ì‚¬(ë°¥ê°’)ì— ì†Œìš”ë˜ëŠ” ë¹„ìš©ì„ ì¶©ë‹¹, ì´í•˜ ê°ì•¡ ì‚¬ìœ ", 
                    reasons: [
                        "ì—°ìˆ˜, í˜‘ì˜íšŒ, í–‰ì‚¬ ì£¼ìµœ ì¸¡ì—ì„œ ì‹ì‚¬ ì œê³µ",
                        "ì˜ˆì‚°(ê³„ì•½)ìœ¼ë¡œ ì‹ë¹„ê°€ ì´ë¯¸ ì§€ì¶œ",
                        "ì—…ë¬´ì¶”ì§„ë¹„ë¡œ ì‹ì‚¬ë¥¼ í•´ê²°í•œ ê²½ìš°",
                        { text: "ì¤‘ë³µì§€ê¸‰ ë°©ì§€", sub: (
                                <div className="flex text-gray-500 mt-0.5">
                                   <span className="shrink-0">ì˜ˆ)</span>
                                   <div className="ml-1">
                                       ì˜¤ì „ ê´€ë‚´ ì¶œì¥ê³¼ ì˜¤í›„ ê´€ì™¸ ì¶œì¥ì´ ê²¹ì¹˜ëŠ” ê²½ìš°,<br/>
                                       í†µìƒì ì¸ ì‹ì‚¬ ì‹œê°„ê³¼ ì¶œì¥ ì‹œê°„ì„ ê³ ë ¤,<br/>
                                       ê´€ì™¸ ì¶œì¥ ì‹ë¹„ì˜ 1/2 ë˜ëŠ” 2/3ë¥¼ ê°ì•¡í•˜ì—¬ ì§€ê¸‰.
                                   </div>
                               </div>
                            ) 
                        }
                    ],
                    items: [
                        { id: 'meal_1', label: "1ì‹ ê°ì•¡" },
                        { id: 'meal_2', label: "2ì‹ ê°ì•¡" },
                        { id: 'meal_3', label: "3ì‹ ê°ì•¡" },
                        { id: 'meal_half', label: "1/2 ê°ì•¡" }
                    ]
                },
                transport: {
                    title: "êµí†µë¹„",
                    desc: "ëª©ì ì§€ë¡œ ì´ë™í•˜ê¸° ìœ„í•œ êµí†µìˆ˜ë‹¨ì˜ ì†Œìš” ë¹„ìš©",
                    subDesc: (
                        <span>
                            <span className="font-bold text-gray-700">ì£¼ìœ ì˜ìˆ˜ì¦(ì¶œì¥ì§€)</span>, <span className="font-bold text-gray-700">í†µí–‰ì˜ìˆ˜ì¦(í•˜ì´íŒ¨ìŠ¤)</span>, ìš´ì„ê²°ì¬ë‚´ì—­ì´ í™•ì¸ë˜ëŠ” ì‹ ìš©ì¹´ë“œë§¤ì¶œì „í‘œ, ìŠ¹ì°¨ê¶Œ, ìš´ì„ ì§€ê¸‰ì²˜ì—ì„œ ë°œí–‰í•œ í˜„ê¸ˆì˜ìˆ˜ì¦, ì„¸ê¸ˆê³„ì‚°ì„œ ë“±
                        </span>
                    ),
                    items: [
                        { id: 'transport_proof', label: "ì¦ê±° ì„œë¥˜ì˜ ë¶€ì ì •" },
                        { id: 'transport_gov_vehicle', label: "ê³µìš©ì°¨ëŸ‰ì´ë‚˜ ì„ì°¨ì°¨ëŸ‰ ì´ìš©í•œ ê²½ìš°" },
                        { id: 'transport_passenger', label: "ë™ë£Œì˜ ì°¨ëŸ‰ì— ë™ìŠ¹í•œ ê²½ìš°", subLabel: "(ë™ìŠ¹ìì—ê²ŒëŠ” ìš´ì„ì„ ì§€ê¸‰í•˜ì§€ ì•ŠìŒ)" }
                    ]
                }
            };

            const toggleDeduction = (id) => {
                setDeductions(prev => {
                    const newState = { ...prev };
                    if (['meal_1', 'meal_2', 'meal_3', 'meal_half'].includes(id)) {
                        if (!prev[id]) { newState['meal_1'] = false; newState['meal_2'] = false; newState['meal_3'] = false; newState['meal_half'] = false; }
                    }
                    newState[id] = !prev[id];
                    if (id === 'gov_vehicle') newState['transport_gov_vehicle'] = newState[id];
                    if (id === 'transport_gov_vehicle') newState['gov_vehicle'] = newState[id];
                    return newState;
                });
            };

            // Data Initialization - ì¤‘ë³µ ì„ ì–¸(Overwrite)ì„ ì™„ì „íˆ ì œê±°í•˜ê³  í†µí•©í•œ ì™„ë²½í•œ 1:1 ëŒ€ì¹­ ë°ì´í„°
            useEffect(() => {
                const INITIAL_DATA = {
                    // [í†µí•© í—ˆë¸Œ 1] ê´‘ì£¼: ì „ë‚¨ë§ + ì „êµ­ë§ + ì—­ë°©í–¥ ëª¨ë‘ ë‹¨ì¼ ê°ì²´ë¡œ í†µí•©
                    "ê´‘ì£¼": { 
                        "ëª©í¬": { gen: 7200, pre: 9300 }, "ì—¬ìˆ˜": { gen: 13000, pre: 16800 }, "ìˆœì²œ": { gen: 8400, pre: 11000 }, "ë‚˜ì£¼": { gen: 4300 }, "ê´‘ì–‘": { gen: 8400, pre: 10900 }, "ë‹´ì–‘": { gen: 2900 }, "ê³¡ì„±": { gen: 5500 }, "êµ¬ë¡€": { gen: 9800 }, "ê³ í¥": { gen: 16200, pre: 21000 }, "ë³´ì„±": { gen: 10500, pre: 11500 }, "í™”ìˆœ": { gen: 2500 }, "ì¥í¥": { gen: 11500, pre: 14900 }, "ê°•ì§„": { gen: 11700, pre: 15200 }, "í•´ë‚¨": { gen: 13700, pre: 16900 }, "ì˜ì•”": { gen: 8700 }, "ë¬´ì•ˆ": { gen: 6000, pre: 7800 }, "í•¨í‰": { gen: 4500, pre: 5800 }, "ì˜ê´‘": { gen: 7300, pre: 9500 }, "ì¥ì„±": { gen: 2400 }, "ì™„ë„": { gen: 20500, pre: 24800 }, "ì§„ë„": { gen: 15300, pre: 19900 }, "ë‚¨ì•…": { gen: 7200, pre: 9300 },
                        "ì„œìš¸": { gen: 22800, pre: 29600 }, "ì„¼íŠ¸ëŸ´": { gen: 22800, pre: 29600 }, "ë™ì„œìš¸": { gen: 23300, pre: 30400 }, "ë¶€ì‚°": { gen: 20400, pre: 29300 }, "ë¶€ì‚°ì‚¬ìƒ": { gen: 19800, pre: 28400 }, "ëŒ€êµ¬": { gen: 16800, pre: 24600 }, "ì„œëŒ€êµ¬": { gen: 16000, pre: 23500 }, "ì¸ì²œ": { gen: 24300, pre: 31500 }, "ëŒ€ì „": { gen: 13300, pre: 18800 }, "ìš¸ì‚°": { gen: 25100, pre: 33700 }, "ì„¸ì¢…": { gen: 15500, pre: 20200 }, "ìˆ˜ì›": { gen: 20900, pre: 27200 }, "ì„±ë‚¨": { gen: 22400, pre: 29100 }, "ê³ ì–‘": { gen: 25300, pre: 32900 }, "ìš©ì¸": { gen: 22500, pre: 29300 }, "ì²­ì£¼": { gen: 15300, pre: 19800 }, "ì²œì•ˆ": { gen: 14700, pre: 19100 }, "ì „ì£¼": { gen: 7500, pre: 10400 }, "ì°½ì›": { gen: 16800, pre: 24600 }, "ì§„ì£¼": { gen: 12500, pre: 18200 }, "í¬í•­": { gen: 24400, pre: 31700 }, "ì›ì£¼": { gen: 26000, pre: 33800 }, "ê°•ë¦‰": { gen: 34500, pre: 44800 }
                    },
                    // [í†µí•© í—ˆë¸Œ 2] ëª©í¬
                    "ëª©í¬": { 
                        "ê´‘ì£¼": { gen: 7200, pre: 9300 }, "ì—¬ìˆ˜": { gen: 16500, pre: 21400 }, "ìˆœì²œ": { gen: 11500, pre: 15000 }, "ë‚˜ì£¼": { gen: 7300 }, "ê´‘ì–‘": { gen: 13700, pre: 17800 }, "ë‹´ì–‘": { gen: 10100 }, "ê³¡ì„±": { gen: 12700 }, "êµ¬ë¡€": { gen: 17000 }, "ê³ í¥": { gen: 18600 }, "ë³´ì„±": { gen: 13500 }, "í™”ìˆœ": { gen: 9700 }, "ì¥í¥": { gen: 10200 }, "ê°•ì§„": { gen: 7800 }, "í•´ë‚¨": { gen: 8700 }, "ì˜ì•”": { gen: 6400 }, "ë¬´ì•ˆ": { gen: 3200 }, "í•¨í‰": { gen: 5100 }, "ì˜ê´‘": { gen: 8700 }, "ì¥ì„±": { gen: 9600 }, "ì™„ë„": { gen: 15700 }, "ì§„ë„": { gen: 8300, pre: 10800 }, "ë‚¨ì•…": { gen: 1700 },
                        "ì„œìš¸": { gen: 25400, pre: 32800 }, "ì„¼íŠ¸ëŸ´": { gen: 25400, pre: 32800 }, "ë™ì„œìš¸": { gen: 26200, pre: 34100 }, "ë¶€ì‚°": { gen: 29500, pre: 37900 }, "ëŒ€êµ¬": { gen: 21300, pre: 27700 }, "ì¸ì²œ": { gen: 28300, pre: 36500 }, "ìˆ˜ì›": { gen: 24500, pre: 31800 }, "êµ¬ë¯¸": { gen: 24000, pre: 31000 }, "ì•ˆì‚°": { gen: 26100, pre: 33900 }
                    },
                    // [í†µí•© í—ˆë¸Œ 3] ìˆœì²œ
                    "ìˆœì²œ": { 
                        "ê´‘ì£¼": { gen: 8400, pre: 11000 }, "ëª©í¬": { gen: 11500, pre: 15000 }, "ì—¬ìˆ˜": { gen: 5000 }, "ë‚˜ì£¼": { gen: 12700 }, "ê´‘ì–‘": { gen: 2500 }, "ë‹´ì–‘": { gen: 10100 }, "ê³¡ì„±": { gen: 9400 }, "êµ¬ë¡€": { gen: 5200 }, "ê³ í¥": { gen: 8700 }, "ë³´ì„±": { gen: 7900 }, "í™”ìˆœ": { gen: 9700 }, "ì¥í¥": { gen: 11100 }, "ê°•ì§„": { gen: 13500 }, "í•´ë‚¨": { gen: 16600 }, "ì˜ì•”": { gen: 17500 }, "ë¬´ì•ˆ": { gen: 14700, pre: 18200 }, "í•¨í‰": { gen: 12900 }, "ì˜ê´‘": { gen: 15700 }, "ì¥ì„±": { gen: 10800 }, "ì™„ë„": { gen: 23200 }, "ì§„ë„": { gen: 23900 }, "ë‚¨ì•…": { gen: 10600, pre: 13800 },
                        "ì„œìš¸": { gen: 22800, pre: 33600 }, "ì„¼íŠ¸ëŸ´": { gen: 22800, pre: 33600 }, "ë™ì„œìš¸": { gen: 23500, pre: 34600 }, "ë¶€ì‚°": { gen: 13500, pre: 18100 }, "ëŒ€êµ¬": { gen: 15200, pre: 22300 }, "ì¸ì²œ": { gen: 25800, pre: 38200 }, "ìˆ˜ì›": { gen: 24200, pre: 36000 }, "ìš¸ì‚°": { gen: 17700, pre: 25800 }, "í†µì˜": { gen: 10800, pre: 14100 }
                    },
                    // [í†µí•© í—ˆë¸Œ 4] ì—¬ìˆ˜
                    "ì—¬ìˆ˜": { 
                        "ê´‘ì£¼": { gen: 13000, pre: 16800 }, "ëª©í¬": { gen: 16500, pre: 21400 }, "ìˆœì²œ": { gen: 5000 }, "ë‚˜ì£¼": { gen: 17300 }, "ê´‘ì–‘": { gen: 7500 }, "ë‹´ì–‘": { gen: 15900 }, "ê³¡ì„±": { gen: 18500 }, "êµ¬ë¡€": { gen: 10200 }, "ê³ í¥": { gen: 13600 }, "ë³´ì„±": { gen: 12800 }, "í™”ìˆœ": { gen: 15500 }, "ì¥í¥": { gen: 16100 }, "ê°•ì§„": { gen: 18500 }, "í•´ë‚¨": { gen: 21500 }, "ì˜ì•”": { gen: 22400 }, "ë¬´ì•ˆ": { gen: 19000 }, "í•¨í‰": { gen: 17500 }, "ì˜ê´‘": { gen: 20300 }, "ì¥ì„±": { gen: 15400 }, "ì™„ë„": { gen: 28200 }, "ì§„ë„": { gen: 24800 }, "ë‚¨ì•…": { gen: 15600, pre: 20200 },
                        "ì„œìš¸": { gen: 25400, pre: 37900 }, "ì„¼íŠ¸ëŸ´": { gen: 25400, pre: 37900 }, "ë¶€ì‚°": { gen: 17200, pre: 23600 }, "ì¸ì²œ": { gen: 28800, pre: 42800 }, "ìˆ˜ì›": { gen: 26900, pre: 40000 }, "ìš¸ì‚°": { gen: 21000, pre: 30800 }
                    },
                    // [í†µí•© í—ˆë¸Œ 5] ê´‘ì–‘
                    "ê´‘ì–‘": { 
                        "ê´‘ì£¼": { gen: 8400, pre: 10900 }, "ëª©í¬": { gen: 13700, pre: 17800 }, "ì—¬ìˆ˜": { gen: 7500 }, "ìˆœì²œ": { gen: 2500 }, "ë‚˜ì£¼": { gen: 12700 }, "ë‹´ì–‘": { gen: 11300 }, "ê³¡ì„±": { gen: 13900 }, "êµ¬ë¡€": { gen: 7700 }, "ê³ í¥": { gen: 10200 }, "ë³´ì„±": { gen: 9900 }, "í™”ìˆœ": { gen: 10900 }, "ì¥í¥": { gen: 13200 }, "ê°•ì§„": { gen: 15600 }, "í•´ë‚¨": { gen: 19100 }, "ì˜ì•”": { gen: 19500 }, "ë¬´ì•ˆ": { gen: 14400 }, "í•¨í‰": { gen: 12900 }, "ì˜ê´‘": { gen: 15700 }, "ì¥ì„±": { gen: 10800 }, "ì™„ë„": { gen: 25800 }, "ì§„ë„": { gen: 23400 }, "ë‚¨ì•…": { gen: 11700 },
                        "ì„œìš¸": { gen: 24400, pre: 36000 }, "ì„¼íŠ¸ëŸ´": { gen: 24400, pre: 36000 }, "ë™ì„œìš¸": { gen: 25100, pre: 37100 }, "ë¶€ì‚°": { gen: 11100, pre: 16100 }, "ì¸ì²œ": { gen: 27200, pre: 40200 }, "ìˆ˜ì›": { gen: 25400, pre: 37900 }
                    },

                    // ì „ë‚¨ ì¼ë°˜ ì‹œêµ° ë°ì´í„° (í—ˆë¸Œë¡œ ê°€ëŠ” ì •ë³´ í¬í•¨)
                    "ë‚˜ì£¼": { "ê´‘ì£¼": { gen: 4300 }, "ëª©í¬": { gen: 7300 }, "ì—¬ìˆ˜": { gen: 17300 }, "ìˆœì²œ": { gen: 12700 }, "ê´‘ì–‘": { gen: 12700 }, "ë‹´ì–‘": { gen: 7200 }, "ê³¡ì„±": { gen: 9800 }, "êµ¬ë¡€": { gen: 14100 }, "ê³ í¥": { gen: 20500 }, "ë³´ì„±": { gen: 14800 }, "í™”ìˆœ": { gen: 6800 }, "ì¥í¥": { gen: 9000 }, "ê°•ì§„": { gen: 8200 }, "í•´ë‚¨": { gen: 9900 }, "ì˜ì•”": { gen: 4400 }, "ë¬´ì•ˆ": { gen: 4100 }, "í•¨í‰": { gen: 3700 }, "ì˜ê´‘": { gen: 7400 }, "ì¥ì„±": { gen: 6700 }, "ì™„ë„": { gen: 16600 }, "ì§„ë„": { gen: 17200 }, "ë‚¨ì•…": { gen: 9000 } },
                    "ë‹´ì–‘": { "ê´‘ì£¼": { gen: 2900 }, "ëª©í¬": { gen: 10100 }, "ì—¬ìˆ˜": { gen: 15900 }, "ìˆœì²œ": { gen: 10100 }, "ë‚˜ì£¼": { gen: 11300 }, "ê´‘ì–‘": { gen: 11300 }, "ê³¡ì„±": { gen: 8400 }, "êµ¬ë¡€": { gen: 12700 }, "ê³ í¥": { gen: 19100 }, "ë³´ì„±": { gen: 13400 }, "í™”ìˆœ": { gen: 8000 }, "ì¥í¥": { gen: 14400 }, "ê°•ì§„": { gen: 14600 }, "í•´ë‚¨": { gen: 16600 }, "ì˜ì•”": { gen: 11600 }, "ë¬´ì•ˆ": { gen: 8900 }, "í•¨í‰": { gen: 7400 }, "ì˜ê´‘": { gen: 10200 }, "ì¥ì„±": { gen: 5300 }, "ì™„ë„": { gen: 23400 }, "ì§„ë„": { gen: 18200 }, "ë‚¨ì•…": { gen: 10100 } },
                    "ê³¡ì„±": { "ê´‘ì£¼": { gen: 5500 }, "ëª©í¬": { gen: 12700 }, "ì—¬ìˆ˜": { gen: 18500 }, "ìˆœì²œ": { gen: 9800 }, "ë‚˜ì£¼": { gen: 9800 }, "ê´‘ì–‘": { gen: 13900 }, "ë‹´ì–‘": { gen: 8400 }, "êµ¬ë¡€": { gen: 4300 }, "ê³ í¥": { gen: 21400 }, "ë³´ì„±": { gen: 17300 }, "í™”ìˆœ": { gen: 8000 }, "ì¥í¥": { gen: 17000 }, "ê°•ì§„": { gen: 17200 }, "í•´ë‚¨": { gen: 19200 }, "ì˜ì•”": { gen: 14200 }, "ë¬´ì•ˆ": { gen: 11500 }, "í•¨í‰": { gen: 8800 }, "ì˜ê´‘": { gen: 12800 }, "ì¥ì„±": { gen: 7900 }, "ì™„ë„": { gen: 23000 }, "ì§„ë„": { gen: 20800 }, "ë‚¨ì•…": { gen: 12700 } },
                    "êµ¬ë¡€": { "ê´‘ì£¼": { gen: 9800 }, "ëª©í¬": { gen: 17000 }, "ì—¬ìˆ˜": { gen: 10200 }, "ìˆœì²œ": { gen: 5200 }, "ë‚˜ì£¼": { gen: 14100 }, "ê´‘ì–‘": { gen: 7700 }, "ë‹´ì–‘": { gen: 12700 }, "ê³¡ì„±": { gen: 4300 }, "ê³ í¥": { gen: 13900 }, "ë³´ì„±": { gen: 13100 }, "í™”ìˆœ": { gen: 12300 }, "ì¥í¥": { gen: 16300 }, "ê°•ì§„": { gen: 18700 }, "í•´ë‚¨": { gen: 21800 }, "ì˜ì•”": { gen: 18500 }, "ë¬´ì•ˆ": { gen: 15800 }, "í•¨í‰": { gen: 14300 }, "ì˜ê´‘": { gen: 17100 }, "ì¥ì„±": { gen: 12200 }, "ì™„ë„": { gen: 28400 }, "ì§„ë„": { gen: 29100 }, "ë‚¨ì•…": { gen: 19000 } },
                    "ê³ í¥": { "ê´‘ì£¼": { gen: 16200, pre: 21000 }, "ëª©í¬": { gen: 18600 }, "ì—¬ìˆ˜": { gen: 13600 }, "ìˆœì²œ": { gen: 8700 }, "ë‚˜ì£¼": { gen: 20500 }, "ê´‘ì–‘": { gen: 10200 }, "ë‹´ì–‘": { gen: 19100 }, "ê³¡ì„±": { gen: 21400 }, "êµ¬ë¡€": { gen: 13900 }, "ë³´ì„±": { gen: 9900 }, "í™”ìˆœ": { gen: 13700 }, "ì¥í¥": { gen: 13100 }, "ê°•ì§„": { gen: 14200 }, "í•´ë‚¨": { gen: 18600 }, "ì˜ì•”": { gen: 19500 }, "ë¬´ì•ˆ": { gen: 22200 }, "í•¨í‰": { gen: 20700 }, "ì˜ê´‘": { gen: 23500 }, "ì¥ì„±": { gen: 18600 }, "ì™„ë„": { gen: 25200 }, "ì§„ë„": { gen: 25900 }, "ë‚¨ì•…": { gen: 23400 } },
                    "ë³´ì„±": { "ê´‘ì£¼": { gen: 10500, pre: 11500 }, "ëª©í¬": { gen: 13500 }, "ì—¬ìˆ˜": { gen: 12800 }, "ìˆœì²œ": { gen: 7900 }, "ë‚˜ì£¼": { gen: 14800 }, "ê´‘ì–‘": { gen: 9900 }, "ë‹´ì–‘": { gen: 13400 }, "ê³¡ì„±": { gen: 17300 }, "êµ¬ë¡€": { gen: 13100 }, "ê³ í¥": { gen: 9900 }, "í™”ìˆœ": { gen: 7800 }, "ì¥í¥": { gen: 3200 }, "ê°•ì§„": { gen: 5700 }, "í•´ë‚¨": { gen: 8700 }, "ì˜ì•”": { gen: 7800 }, "ë¬´ì•ˆ": { gen: 16700 }, "í•¨í‰": { gen: 15000 }, "ì˜ê´‘": { gen: 17800 }, "ì¥ì„±": { gen: 12900 }, "ì™„ë„": { gen: 15400 }, "ì§„ë„": { gen: 16000 }, "ë‚¨ì•…": { gen: 13500 } },
                    "í™”ìˆœ": { "ê´‘ì£¼": { gen: 2500 }, "ëª©í¬": { gen: 9700 }, "ì—¬ìˆ˜": { gen: 15500 }, "ìˆœì²œ": { gen: 9700 }, "ë‚˜ì£¼": { gen: 6800 }, "ê´‘ì–‘": { gen: 10900 }, "ë‹´ì–‘": { gen: 8000 }, "ê³¡ì„±": { gen: 8000 }, "êµ¬ë¡€": { gen: 12300 }, "ê³ í¥": { gen: 13700 }, "ë³´ì„±": { gen: 7800 }, "ì¥í¥": { gen: 10000 }, "ê°•ì§„": { gen: 11400 }, "í•´ë‚¨": { gen: 16500 }, "ì˜ì•”": { gen: 11200 }, "ë¬´ì•ˆ": { gen: 8500 }, "í•¨í‰": { gen: 7000 }, "ì˜ê´‘": { gen: 9800 }, "ì¥ì„±": { gen: 4900 }, "ì™„ë„": { gen: 23000 }, "ì§„ë„": { gen: 17800 }, "ë‚¨ì•…": { gen: 9700 } },
                    "ì¥í¥": { "ê´‘ì£¼": { gen: 11500, pre: 14900 }, "ëª©í¬": { gen: 10200 }, "ì—¬ìˆ˜": { gen: 16100 }, "ìˆœì²œ": { gen: 11100 }, "ë‚˜ì£¼": { gen: 9000 }, "ê´‘ì–‘": { gen: 13200 }, "ë‹´ì–‘": { gen: 14400 }, "ê³¡ì„±": { gen: 17000 }, "êµ¬ë¡€": { gen: 16300 }, "ê³ í¥": { gen: 13100 }, "ë³´ì„±": { gen: 3200 }, "í™”ìˆœ": { gen: 10000 }, "ê°•ì§„": { gen: 2400 }, "í•´ë‚¨": { gen: 5400 }, "ì˜ì•”": { gen: 4600 }, "ë¬´ì•ˆ": { gen: 8500 }, "í•¨í‰": { gen: 7000 }, "ì˜ê´‘": { gen: 9800 }, "ì¥ì„±": { gen: 4900 }, "ì™„ë„": { gen: 2300 }, "ì§„ë„": { gen: 12700 }, "ë‚¨ì•…": { gen: 9700 } },
                    "ê°•ì§„": { "ê´‘ì£¼": { gen: 11700, pre: 15200 }, "ëª©í¬": { gen: 7800 }, "ì—¬ìˆ˜": { gen: 18500 }, "ìˆœì²œ": { gen: 13500 }, "ë‚˜ì£¼": { gen: 8200 }, "ê´‘ì–‘": { gen: 12700 }, "ë‹´ì–‘": { gen: 14600 }, "ê³¡ì„±": { gen: 17200 }, "êµ¬ë¡€": { gen: 18700 }, "ê³ í¥": { gen: 14200 }, "ë³´ì„±": { gen: 5700 }, "í™”ìˆœ": { gen: 11400 }, "ì¥í¥": { gen: 2400 }, "í•´ë‚¨": { gen: 3000 }, "ì˜ì•”": { gen: 3900 }, "ë¬´ì•ˆ": { gen: 11000 }, "í•¨í‰": { gen: 11600 }, "ì˜ê´‘": { gen: 16500 }, "ì¥ì„±": { gen: 14100 }, "ì™„ë„": { gen: 7300 }, "ì§„ë„": { gen: 10300 }, "ë‚¨ì•…": { gen: 7600 } },
                    "í•´ë‚¨": { "ê´‘ì£¼": { gen: 13700, pre: 16900 }, "ëª©í¬": { gen: 8700 }, "ì—¬ìˆ˜": { gen: 21500 }, "ìˆœì²œ": { gen: 16600 }, "ë‚˜ì£¼": { gen: 9900 }, "ê´‘ì–‘": { gen: 19100 }, "ë‹´ì–‘": { gen: 16600 }, "ê³¡ì„±": { gen: 19200 }, "êµ¬ë¡€": { gen: 21800 }, "ê³ í¥": { gen: 18600 }, "ë³´ì„±": { gen: 8700 }, "í™”ìˆœ": { gen: 16500 }, "ì¥í¥": { gen: 5400 }, "ê°•ì§„": { gen: 3000 }, "ì˜ì•”": { gen: 4900 }, "ë¬´ì•ˆ": { gen: 11900 }, "í•¨í‰": { gen: 13800 }, "ì˜ê´‘": { gen: 17400 }, "ì¥ì„±": { gen: 16100 }, "ì™„ë„": { gen: 6700, pre: 8200 }, "ì§„ë„": { gen: 7300 }, "ë‚¨ì•…": { gen: 8500 } },
                    "ì˜ì•”": { "ê´‘ì£¼": { gen: 8700 }, "ëª©í¬": { gen: 6400 }, "ì—¬ìˆ˜": { gen: 22400 }, "ìˆœì²œ": { gen: 17500 }, "ë‚˜ì£¼": { gen: 4400 }, "ê´‘ì–‘": { gen: 19500 }, "ë‹´ì–‘": { gen: 11600 }, "ê³¡ì„±": { gen: 14200 }, "êµ¬ë¡€": { gen: 18500 }, "ê³ í¥": { gen: 19500 }, "ë³´ì„±": { gen: 7800 }, "í™”ìˆœ": { gen: 11200 }, "ì¥í¥": { gen: 4600 }, "ê°•ì§„": { gen: 3900 }, "í•´ë‚¨": { gen: 4900 }, "ë¬´ì•ˆ": { gen: 9600 }, "í•¨í‰": { gen: 7700 }, "ì˜ê´‘": { gen: 11800 }, "ì¥ì„±": { gen: 11100 }, "ì™„ë„": { gen: 11600 }, "ì§„ë„": { gen: 10300 }, "ë‚¨ì•…": { gen: 3700 } },
                    "ë¬´ì•ˆ": { "ê´‘ì£¼": { gen: 6000, pre: 7800 }, "ëª©í¬": { gen: 3200 }, "ì—¬ìˆ˜": { gen: 19000 }, "ìˆœì²œ": { gen: 14700, pre: 18200 }, "ë‚˜ì£¼": { gen: 4100 }, "ê´‘ì–‘": { gen: 14400 }, "ë‹´ì–‘": { gen: 8900 }, "ê³¡ì„±": { gen: 11500 }, "êµ¬ë¡€": { gen: 15800 }, "ê³ í¥": { gen: 22200 }, "ë³´ì„±": { gen: 16700 }, "í™”ìˆœ": { gen: 8500 }, "ì¥í¥": { gen: 13400 }, "ê°•ì§„": { gen: 11000 }, "í•´ë‚¨": { gen: 11900 }, "ì˜ì•”": { gen: 9600 }, "í•¨í‰": { gen: 2500 }, "ì˜ê´‘": { gen: 5500 }, "ì¥ì„±": { gen: 8400 }, "ì™„ë„": { gen: 18900 }, "ì§„ë„": { gen: 11500 }, "ë‚¨ì•…": { gen: 3700 } },
                    "í•¨í‰": { "ê´‘ì£¼": { gen: 4500, pre: 5800 }, "ëª©í¬": { gen: 5100 }, "ì—¬ìˆ˜": { gen: 17500 }, "ìˆœì²œ": { gen: 12900 }, "ë‚˜ì£¼": { gen: 3700 }, "ê´‘ì–‘": { gen: 12900 }, "ë‹´ì–‘": { gen: 7400 }, "ê³¡ì„±": { gen: 8800 }, "êµ¬ë¡€": { gen: 14300 }, "ê³ í¥": { gen: 20700 }, "ë³´ì„±": { gen: 15000 }, "í™”ìˆœ": { gen: 7000 }, "ì¥í¥": { gen: 15300 }, "ê°•ì§„": { gen: 11600 }, "í•´ë‚¨": { gen: 13800 }, "ì˜ì•”": { gen: 7700 }, "ë¬´ì•ˆ": { gen: 2500 }, "ì˜ê´‘": { gen: 3600 }, "ì¥ì„±": { gen: 6900 }, "ì™„ë„": { gen: 20800 }, "ì§„ë„": { gen: 13400 }, "ë‚¨ì•…": { gen: 6800 } },
                    "ì˜ê´‘": { "ê´‘ì£¼": { gen: 7300, pre: 9500 }, "ëª©í¬": { gen: 8700 }, "ì—¬ìˆ˜": { gen: 20300 }, "ìˆœì²œ": { gen: 15700 }, "ë‚˜ì£¼": { gen: 7400 }, "ê´‘ì–‘": { gen: 15700 }, "ë‹´ì–‘": { gen: 10200 }, "ê³¡ì„±": { gen: 12800 }, "êµ¬ë¡€": { gen: 17100 }, "ê³ í¥": { gen: 23500 }, "ë³´ì„±": { gen: 17800 }, "í™”ìˆœ": { gen: 9800 }, "ì¥í¥": { gen: 18900 }, "ê°•ì§„": { gen: 16500 }, "í•´ë‚¨": { gen: 17400 }, "ì˜ì•”": { gen: 11800 }, "ë¬´ì•ˆ": { gen: 5500 }, "í•¨í‰": { gen: 3600 }, "ì¥ì„±": { gen: 5900 }, "ì™„ë„": { gen: 24400 }, "ì§„ë„": { gen: 17000 }, "ë‚¨ì•…": { gen: 8700 } },
                    "ì¥ì„±": { "ê´‘ì£¼": { gen: 2400 }, "ëª©í¬": { gen: 9600 }, "ì—¬ìˆ˜": { gen: 10800 }, "ìˆœì²œ": { gen: 6700 }, "ë‚˜ì£¼": { gen: 10800 }, "ê´‘ì–‘": { gen: 5300 }, "ë‹´ì–‘": { gen: 7900 }, "ê³¡ì„±": { gen: 12200 }, "êµ¬ë¡€": { gen: 18600 }, "ê³ í¥": { gen: 12900 }, "ë³´ì„±": { gen: 4900 }, "í™”ìˆœ": { gen: 13900 }, "ì¥í¥": { gen: 14100 }, "ê°•ì§„": { gen: 16100 }, "í•´ë‚¨": { gen: 11100 }, "ì˜ì•”": { gen: 8400 }, "ë¬´ì•ˆ": { gen: 6900 }, "í•¨í‰": { gen: 5900 }, "ì˜ê´‘": { gen: 9700 }, "ì™„ë„": { gen: 22900 }, "ì§„ë„": { gen: 14000 }, "ë‚¨ì•…": { gen: 15500 } },
                    "ì™„ë„": { "ê´‘ì£¼": { gen: 20500, pre: 24800 }, "ëª©í¬": { gen: 15700 }, "ì—¬ìˆ˜": { gen: 28200 }, "ìˆœì²œ": { gen: 23200 }, "ë‚˜ì£¼": { gen: 16600 }, "ê´‘ì–‘": { gen: 25800 }, "ë‹´ì–‘": { gen: 23400 }, "ê³¡ì„±": { gen: 23000 }, "êµ¬ë¡€": { gen: 28400 }, "ê³ í¥": { gen: 25200 }, "ë³´ì„±": { gen: 15400 }, "í™”ìˆœ": { gen: 23000 }, "ì¥í¥": { gen: 12100 }, "ê°•ì§„": { gen: 7300 }, "í•´ë‚¨": { gen: 6700, pre: 8200 }, "ì˜ì•”": { gen: 11600 }, "ë¬´ì•ˆ": { gen: 18900 }, "í•¨í‰": { gen: 20800 }, "ì˜ê´‘": { gen: 22900 }, "ì¥ì„±": { gen: 22900 }, "ì§„ë„": { gen: 14000 }, "ë‚¨ì•…": { gen: 15500 } },
                    "ì§„ë„": { "ê´‘ì£¼": { gen: 15300, pre: 19900 }, "ëª©í¬": { gen: 8300, pre: 10800 }, "ì—¬ìˆ˜": { gen: 24800 }, "ìˆœì²œ": { gen: 23900 }, "ë‚˜ì£¼": { gen: 17200 }, "ê´‘ì–‘": { gen: 23400 }, "ë‹´ì–‘": { gen: 18200 }, "ê³¡ì„±": { gen: 20800 }, "êµ¬ë¡€": { gen: 29100 }, "ê³ í¥": { gen: 25900 }, "ë³´ì„±": { gen: 16000 }, "í™”ìˆœ": { gen: 17800 }, "ì¥í¥": { gen: 12700 }, "ê°•ì§„": { gen: 10300 }, "í•´ë‚¨": { gen: 7300 }, "ì˜ì•”": { gen: 10300 }, "ë¬´ì•ˆ": { gen: 11500 }, "í•¨í‰": { gen: 13400 }, "ì˜ê´‘": { gen: 17000 }, "ì¥ì„±": { gen: 17700 }, "ì™„ë„": { gen: 14000 }, "ë‚¨ì•…": { gen: 10100 } },
                    "ë‚¨ì•…": { "ê´‘ì£¼": { gen: 7200, pre: 9300 }, "ëª©í¬": { gen: 1700 }, "ì—¬ìˆ˜": { gen: 15600, pre: 20200 }, "ìˆœì²œ": { gen: 10600, pre: 13800 }, "ë‚˜ì£¼": { gen: 9000 }, "ê´‘ì–‘": { gen: 11700 }, "ë‹´ì–‘": { gen: 10100 }, "ê³¡ì„±": { gen: 12700 }, "êµ¬ë¡€": { gen: 19000 }, "ê³ í¥": { gen: 23400 }, "ë³´ì„±": { gen: 13500 }, "í™”ìˆœ": { gen: 9700 }, "ì¥í¥": { gen: 10000 }, "ê°•ì§„": { gen: 7600 }, "í•´ë‚¨": { gen: 8500 }, "ì˜ì•”": { gen: 3700 }, "ë¬´ì•ˆ": { gen: 3700 }, "í•¨í‰": { gen: 6800 }, "ì˜ê´‘": { gen: 8700 }, "ì¥ì„±": { gen: 9600 }, "ì™„ë„": { gen: 15500 }, "ì§„ë„": { gen: 10100 } },

                    // íƒ€ ê¶Œì—­ ì£¼ìš” ë„ì‹œ (í—ˆë¸Œë¡œ ê°€ëŠ” ì •ë³´ í¬í•¨)
                    "ì„œìš¸": { "ê´‘ì£¼": { gen: 22800, pre: 29600 }, "ëª©í¬": { gen: 25400, pre: 32800 }, "ìˆœì²œ": { gen: 22800, pre: 33600 }, "ì—¬ìˆ˜": { gen: 25400, pre: 37900 }, "ê´‘ì–‘": { gen: 24400, pre: 36000 }, "ë¶€ì‚°": { gen: 26700, pre: 39800 }, "ëŒ€êµ¬": { gen: 19600, pre: 29600 }, "ëŒ€ì „": { gen: 11200, pre: 16600 }, "ì „ì£¼": { gen: 14900, pre: 22000 }, "ì²œì•ˆ": { gen: 6800, pre: 8900 } },
                    "ì„¼íŠ¸ëŸ´": { "ê´‘ì£¼": { gen: 22800, pre: 29600 }, "ëª©í¬": { gen: 25400, pre: 32800 }, "ìˆœì²œ": { gen: 22800, pre: 33600 }, "ì—¬ìˆ˜": { gen: 25400, pre: 37900 }, "ê´‘ì–‘": { gen: 24400, pre: 36000 } },
                    "ë™ì„œìš¸": { "ê´‘ì£¼": { gen: 23300, pre: 30400 }, "ëª©í¬": { gen: 26200, pre: 34100 }, "ìˆœì²œ": { gen: 23500, pre: 34600 }, "ê´‘ì–‘": { gen: 25100, pre: 37100 } },
                    "ë¶€ì‚°": { "ê´‘ì£¼": { gen: 20400, pre: 29300 }, "ëª©í¬": { gen: 29500, pre: 37900 }, "ìˆœì²œ": { gen: 13500, pre: 18100 }, "ì—¬ìˆ˜": { gen: 17200, pre: 23600 }, "ê´‘ì–‘": { gen: 11100, pre: 16100 }, "ì„œìš¸": { gen: 26700, pre: 39800 } },
                    "ëŒ€êµ¬": { "ê´‘ì£¼": { gen: 16800, pre: 24600 }, "ëª©í¬": { gen: 21300, pre: 27700 }, "ìˆœì²œ": { gen: 15200, pre: 22300 }, "ì„œìš¸": { gen: 19600, pre: 29600 } },
                    "ì¸ì²œ": { "ê´‘ì£¼": { gen: 24300, pre: 31500 }, "ëª©í¬": { gen: 28300, pre: 36500 }, "ìˆœì²œ": { gen: 25800, pre: 38200 }, "ì—¬ìˆ˜": { gen: 28800, pre: 42800 }, "ê´‘ì–‘": { gen: 27200, pre: 40200 } },
                    "ìˆ˜ì›": { "ê´‘ì£¼": { gen: 20900, pre: 27200 }, "ëª©í¬": { gen: 24500, pre: 31800 }, "ìˆœì²œ": { gen: 24200, pre: 36000 }, "ì—¬ìˆ˜": { gen: 26900, pre: 40000 }, "ê´‘ì–‘": { gen: 25400, pre: 37900 } },
                    "ëŒ€ì „": { "ê´‘ì£¼": { gen: 13300, pre: 18800 }, "ì„œìš¸": { gen: 11200, pre: 16600 } },
                    "ìš¸ì‚°": { "ê´‘ì£¼": { gen: 25100, pre: 33700 }, "ìˆœì²œ": { gen: 17700, pre: 25800 }, "ì—¬ìˆ˜": { gen: 21000, pre: 30800 } },
                    "ì „ì£¼": { "ê´‘ì£¼": { gen: 7500, pre: 10400 }, "ì„œìš¸": { gen: 14900, pre: 22000 } },
                    "ì²œì•ˆ": { "ê´‘ì£¼": { gen: 14700, pre: 19100 }, "ì„œìš¸": { gen: 6800, pre: 8900 } },
                    "ë¶€ì‚°ì‚¬ìƒ": { "ê´‘ì£¼": { gen: 19800, pre: 28400 } },
                    "ì„œëŒ€êµ¬": { "ê´‘ì£¼": { gen: 16000, pre: 23500 } },
                    "ì„¸ì¢…": { "ê´‘ì£¼": { gen: 15500, pre: 20200 } },
                    "ì„±ë‚¨": { "ê´‘ì£¼": { gen: 22400, pre: 29100 } },
                    "ê³ ì–‘": { "ê´‘ì£¼": { gen: 25300, pre: 32900 } },
                    "ìš©ì¸": { "ê´‘ì£¼": { gen: 22500, pre: 29300 } },
                    "ì²­ì£¼": { "ê´‘ì£¼": { gen: 15300, pre: 19800 } },
                    "ì°½ì›": { "ê´‘ì£¼": { gen: 16800, pre: 24600 } },
                    "ì§„ì£¼": { "ê´‘ì£¼": { gen: 12500, pre: 18200 } },
                    "í¬í•­": { "ê´‘ì£¼": { gen: 24400, pre: 31700 } },
                    "ì›ì£¼": { "ê´‘ì£¼": { gen: 26000, pre: 33800 } },
                    "ê°•ë¦‰": { "ê´‘ì£¼": { gen: 34500, pre: 44800 } },
                    "êµ¬ë¯¸": { "ëª©í¬": { gen: 24000, pre: 31000 } },
                    "ì•ˆì‚°": { "ëª©í¬": { gen: 26100, pre: 33900 } },
                    "í†µì˜": { "ìˆœì²œ": { gen: 10800, pre: 14100 } }
                };

                // ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“  ë„ì‹œ ì¶”ì¶œ
                const allCitiesSet = new Set([
                    ...Object.keys(INITIAL_DATA), 
                    "ì‹ ì•ˆ", ...ALL_SHINAN_AREAS, 
                    "ì„œìš¸", "ì„¼íŠ¸ëŸ´", "ë™ì„œìš¸", "ë¶€ì‚°", "ë¶€ì‚°ì‚¬ìƒ", "ëŒ€êµ¬", "ì„œëŒ€êµ¬", "ì¸ì²œ", "ëŒ€ì „", "ê´‘ì£¼", "ìš¸ì‚°", "ì„¸ì¢…", "ì œì£¼",
                    "ìˆ˜ì›", "ì„±ë‚¨", "ê³ ì–‘", "ìš©ì¸", "ì°½ì›", "ì²­ì£¼", "ì²œì•ˆ", "ì „ì£¼", "í¬í•­", "ê¹€í•´", "ì¶˜ì²œ", "ì›ì£¼", "ê°•ë¦‰", "ì•ˆë™", "ê²½ì£¼", "êµ¬ë¯¸", "ì•ˆì‚°", "í†µì˜", "ì§„ì£¼"
                ]);
                Object.values(INITIAL_DATA).forEach(dest => { Object.keys(dest).forEach(city => allCitiesSet.add(city)); });
                
                const sortedCities = Array.from(allCitiesSet).filter(city => city !== 'ì˜ì•”(ë…ì²œ)').sort();
                setAvailableCities(sortedCities);

                // ì–‘ë°©í–¥ ë°ì´í„° ìë™ ëŒ€ì¹­ ì—°ê²°
                const expandedData = JSON.parse(JSON.stringify(INITIAL_DATA));
                Object.keys(INITIAL_DATA).forEach(from => {
                    Object.keys(INITIAL_DATA[from]).forEach(to => {
                        if (!expandedData[to]) expandedData[to] = {};
                        if (!expandedData[to][from]) expandedData[to][from] = INITIAL_DATA[from][to];
                    });
                });
                setBusDataState(expandedData);
            }, []);

            useEffect(() => {
                if (availableCities.includes(origin) && availableCities.includes(destination)) performCalculation(origin, destination);
            }, [origin, destination, availableCities]);

            useEffect(() => { if (origin === 'ì‹ ì•ˆ') setModalState({ type: 'origin', data: [] }); }, [origin]);
            useEffect(() => { if (destination === 'ì‹ ì•ˆ') setModalState({ type: 'destination', data: [] }); }, [destination]);

            const handleModalSelect = (city) => {
                if (modalState.type === 'origin') setOrigin(city);
                else if (modalState.type === 'destination') setDestination(city);
                else if (modalState.type === 'selection') {
                    if (modalState.target === 'origin') setOrigin(city);
                    else if (modalState.target === 'destination') setDestination(city);
                }
                setModalState({ type: null, data: [] });
            };

            const performCalculation = (overOrigin, overDestination) => {
                const from = normalize(overOrigin || origin);
                const to = normalize(overDestination || destination);
                
                setDeductions({
                    gov_vehicle: false, meal_1: false, meal_2: false, meal_3: false, meal_half: false, transport_proof: false, transport_gov_vehicle: false, transport_passenger: false
                });
                setShipFare(0); 
                setIntraDeductions({ shortTime: false, govVehicle: false });
                setCustomTransport('');

                if (!from || !to) return;

                if (from === "ì‹ ì•ˆ" && to === "ì‹ ì•ˆ") {
                    setResult({ type: 'intraCity', short: 10000, long: 20000, note: "ê´€ë‚´ì—¬ë¹„ëŠ” êµí†µë¹„ì™€ ì‹ë¹„ ë“±ì„ í¬í•¨í•œ ì •ì•¡ í˜•íƒœì˜ ë¹„ìš©ìœ¼ë¡œ ì§€ê¸‰" });
                    return;
                }

                setResult(null);

                const fromZoneIdx = getShinanZoneIndex(from);
                const toZoneIdx = getShinanZoneIndex(to);

                // ì—°ë¥™/ë„ì„œ íŠ¹ìˆ˜ ì§€ì—­ ì—°ì‚° ì²˜ë¦¬
                if (fromZoneIdx !== -1 && toZoneIdx !== -1) {
                    const isConnectedFrom = fromZoneIdx <= 2;
                    const isConnectedTo = toZoneIdx <= 2;
                    if (fromZoneIdx === toZoneIdx || (isConnectedFrom && isConnectedTo)) {
                        setResult({ type: 'intraCity', short: 10000, long: 20000, note: "ê´€ë‚´ì—¬ë¹„ëŠ” êµí†µë¹„ì™€ ì‹ë¹„ ë“±ì„ í¬í•¨í•œ ì •ì•¡ í˜•íƒœì˜ ë¹„ìš©ìœ¼ë¡œ ì§€ê¸‰." });
                        return;
                    } else {
                        setResult({ type: 'internal', data: { gen: 0, pre: null, note: "" }, specialNote: "ì—¬ê°ì„  ìš´í–‰ ì§€ì—­ (ìœ¡ìƒêµí†µë¹„ ì™¸ ì„ ë°•ìš´ì„ ë³„ë„)", isShipOnlyRoute: true, startIsShip: true, endIsShip: true, hideFare: true });
                        return;
                    }
                }

                if (from === to) {
                    setResult({ type: 'intraCity', short: 10000, long: 20000, note: "ê´€ë‚´ì—¬ë¹„ëŠ” êµí†µë¹„ì™€ ì‹ë¹„ ë“±ì„ í¬í•¨í•œ ì •ì•¡ í˜•íƒœì˜ ë¹„ìš©ìœ¼ë¡œ ì§€ê¸‰." });
                    return;
                }

                let specialNote = null;
                const checkRoute = (a, b) => (from === a && to === b) || (from === b && to === a);

                if (checkRoute('ëª©í¬', 'ì˜ì•”')) specialNote = "ë…ì²œí„°ë¯¸ë„ ì´ìš© ì‹œ 3,900ì›";
                else if (checkRoute('ëª©í¬', 'ê´‘ì–‘')) specialNote = "ë™ê´‘ì–‘ì¤‘ë§ˆë²„ìŠ¤í„°ë¯¸ë„ ì´ìš© ì‹œ 20,100ì›(ì¼ë°˜ 15,500ì›)";
                else if (checkRoute('ê´‘ì£¼', 'ì˜ì•”')) specialNote = "ì§„ì›”ë™ì‹œì™¸ë²„ìŠ¤í„°ë¯¸ë„ ì´ìš© ì‹œ 7,700ì›";
                else if (checkRoute('ê´‘ì–‘', 'ì—¬ìˆ˜')) specialNote = "ì´ìˆœì‹ ëŒ€êµë°©ë©´ ì´ìš© ì‹œ 5,600ì›";
                else if (checkRoute('ìˆœì²œ', 'ê³¡ì„±')) specialNote = "ITX(ë„ì‹œê°„íŠ¹ê¸‰ì—´ì°¨) ì´ìš© ì‹œ 7,100ì›";
                else if (SHIP_ONLY_AREAS.includes(from) || SHIP_ONLY_AREAS.includes(to)) specialNote = "ì—¬ê°ì„  ìš´í–‰ ì§€ì—­ (ìœ¡ìƒêµí†µë¹„ ì™¸ ì„ ë°•ìš´ì„ ë³„ë„)";

                let searchFrom = from;
                let searchTo = to;
                let surcharge = 0;
                let isIslandRoute = false;
                let hasShipCost = false;
                let startIsShip = false;
                let endIsShip = false;
                let isShipOnlyRoute = false;
                
                let preRoute = [];
                let postRoute = [];

                if (SHIP_ONLY_AREAS.includes(from)) { searchFrom = 'ëª©í¬'; startIsShip = true; isIslandRoute = true; hasShipCost = true; preRoute.push(`${from}â†’ëª©í¬(ì—¬ê°ì„ )`); }
                if (SHIP_ONLY_AREAS.includes(to)) { searchTo = 'ëª©í¬'; endIsShip = true; isIslandRoute = true; hasShipCost = true; postRoute.push(`ëª©í¬â†’${to}(ì—¬ê°ì„ )`); }
                if ((from === 'ëª©í¬' && SHIP_ONLY_AREAS.includes(to)) || (to === 'ëª©í¬' && SHIP_ONLY_AREAS.includes(from))) isShipOnlyRoute = true;

                if (GROUP_3000.includes(from)) { surcharge += 3000; searchFrom = "ëª©í¬"; isIslandRoute = true; preRoute.push(`${from}â†’ëª©í¬(ë²„ìŠ¤ 3,000ì›)`); }
                if (GROUP_3000.includes(to)) { surcharge += 3000; searchTo = "ëª©í¬"; isIslandRoute = true; postRoute.push(`ëª©í¬â†’${to}(ë²„ìŠ¤ 3,000ì›)`); }

                if (GROUP_6000.includes(from)) { surcharge += 6000; searchFrom = "ëª©í¬"; isIslandRoute = true; preRoute.push(`${from}â†’ëª©í¬(ë²„ìŠ¤ 6,000ì›)`); }
                if (GROUP_6000.includes(to)) { surcharge += 6000; searchTo = "ëª©í¬"; isIslandRoute = true; postRoute.push(`ëª©í¬â†’${to}(ë²„ìŠ¤ 6,000ì›)`); }

                if (from === 'ì••í•´' && to !== 'ëª©í¬') { searchFrom = 'ëª©í¬'; surcharge += 1200; isIslandRoute = true; preRoute.push(`ì••í•´â†’ëª©í¬(ë²„ìŠ¤ 1,200ì›)`); }
                if (to === 'ì••í•´' && from !== 'ëª©í¬') { searchTo = 'ëª©í¬'; surcharge += 1200; isIslandRoute = true; postRoute.push(`ëª©í¬â†’ì••í•´(ë²„ìŠ¤ 1,200ì›)`); }

                let mainRoute = [];
                let viaPointStr = null;
                let routeType = 'direct';
                let finalData = null;
                let customSource = "2026. 1. 1. ì ì‹œì™¸ë²„ìŠ¤ ì¸ê°€ë‚´ì—­ ê¸°ë°˜ ìì²´ DB";

                // ì˜ˆì™¸: ëª©í¬ <-> ì••í•´ ì§í†µ
                if ((from === 'ëª©í¬' && to === 'ì••í•´') || (from === 'ì••í•´' && to === 'ëª©í¬')) {
                    finalData = { gen: 1200, pre: null, note: "ì‹ ì•ˆêµ°ë†ì–´ì´Œë²„ìŠ¤ ìš”ê¸ˆ ê°€ì‚°: 1,200ì›" };
                } else {
                    // 1. ë‚´ë¶€ DB ì§í†µ íƒìƒ‰ (í•„ìˆ˜)
                    const localData = busDataState[searchFrom]?.[searchTo];
                    if (localData) {
                        finalData = {
                            gen: (localData.gen || 0) + surcharge,
                            pre: localData.pre ? localData.pre + surcharge : null,
                        };
                        
                        if (localData.note) {
                            mainRoute.push(localData.note);
                        } else if (searchFrom !== searchTo) {
                            mainRoute.push(`${searchFrom}â†’${searchTo}(${fmt(localData.gen)}ì›)`);
                        }
                        
                        if (isIslandRoute) {
                            viaPointStr = 'ëª©í¬';
                            routeType = 'transfer';
                        } else if (localData.note?.includes("ê²½ìœ ")) {
                            viaPointStr = localData.note.replace(" ê²½ìœ ", "");
                            routeType = 'transfer';
                        }
                    } else {
                        // 2. ì¼ì§ì„  ìµœë‹¨ê±°ë¦¬ ê¸°ë°˜ ì§€ë¦¬ì  ìµœì  í—ˆë¸Œ íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜
                        const hubs = ['ê´‘ì£¼', 'ëª©í¬', 'ìˆœì²œ', 'ì—¬ìˆ˜', 'ê´‘ì–‘'];
                        let validHubs = [];
                        
                        for (const hub of hubs) {
                            if (searchFrom === hub || searchTo === hub) continue;

                            const leg1 = busDataState[searchFrom]?.[hub];
                            const leg2 = busDataState[hub]?.[searchTo];
                            
                            if (leg1 && leg2) {
                                let dist = 999999;
                                const coordA = CITY_COORDS[searchFrom];
                                const coordB = CITY_COORDS[searchTo];
                                const coordH = CITY_COORDS[hub];
                                
                                if (coordA && coordB && coordH) {
                                    // ê²½ë„(X), ìœ„ë„(Y) ê¸°ì¤€ ë²¡í„° ì—°ì‚°
                                    dist = getDistanceToSegment(coordH[1], coordH[0], coordA[1], coordA[0], coordB[1], coordB[0]);
                                } else {
                                    // ì¢Œí‘œ ëˆ„ë½ ì‹œ ìš”ê¸ˆ í•©ì‚°ê°’ì„ ë³´ì¡° ê±°ë¦¬ ì§€í‘œë¡œ ì‚¬ìš©
                                    dist = leg1.gen + leg2.gen;
                                }
                                validHubs.push({ hub, leg1, leg2, dist });
                            }
                        }

                        if (validHubs.length > 0) {
                            // ì¼ì§ì„  ê²½ë¡œìƒ ê°€ì¥ ê°€ê¹Œìš´(ì´ë™ ë¡œìŠ¤ê°€ ì ì€) ê²½ìœ ì§€ ìˆœìœ¼ë¡œ ì •ë ¬
                            validHubs.sort((a, b) => a.dist - b.dist);
                            
                            const bestHub = validHubs[0];
                            finalData = {
                                gen: bestHub.leg1.gen + bestHub.leg2.gen + surcharge,
                                pre: (bestHub.leg1.pre || bestHub.leg1.gen) + (bestHub.leg2.pre || bestHub.leg2.gen) + surcharge,
                            };
                            mainRoute.push(`${searchFrom}â†’${bestHub.hub}(${fmt(bestHub.leg1.gen)}ì›)`);
                            mainRoute.push(`${bestHub.hub}â†’${searchTo}(${fmt(bestHub.leg2.gen)}ì›)`);
                            viaPointStr = isIslandRoute ? `ëª©í¬, ${bestHub.hub}` : bestHub.hub;
                            routeType = 'transfer';
                            customSource = "ìì²´DB (ì¼ì§ì„  ìµœë‹¨ ê²½ìœ ì§€ ìë™ë§¤í•‘)";
                        }
                    }
                    
                    if (finalData) finalData.note = [...preRoute, ...mainRoute, ...postRoute].join(' + ');
                }

                if (finalData) {
                    setResult({
                        type: 'internal', data: finalData, routeType, viaPoint: viaPointStr, specialNote,
                        source: customSource,
                        startIsShip, endIsShip, isShipOnlyRoute, hasShipCost
                    });
                } else {
                    setResult({ type: 'external', source: "ì™¸ë¶€ ê²€ìƒ‰ (ë„¤ì´ë²„ì§€ë„, ì¹´ì¹´ì˜¤ë§µ)" });
                }
            };

            const calculateDetailedCost = () => {
                if (!result) return { daily: 0, meal: 0, transport: 0, total: 0 };
                
                if (result.type === 'intraCity') {
                    let total = 20000;
                    if (intraDeductions.shortTime) total -= 10000;
                    if (intraDeductions.govVehicle) total -= 10000;
                    return { daily: 0, meal: 0, transport: 0, total: Math.max(0, total) };
                }

                let daily = 25000;
                if (deductions.gov_vehicle) daily = 12500;

                let meal = 25000;
                if (deductions.meal_1) meal = 16660;
                else if (deductions.meal_2) meal = 8330;
                else if (deductions.meal_3) meal = 0;
                else if (deductions.meal_half) meal = 12500;

                let transport = 0;
                const isTransportDeducted = deductions.transport_proof || deductions.transport_gov_vehicle || deductions.transport_passenger;

                if (!isTransportDeducted) {
                    if (result.type === 'internal') {
                        const oneWayFare = result.data.pre ? result.data.pre : result.data.gen;
                        transport = oneWayFare * 2;
                    } else if (result.type === 'external') {
                        transport = Number(customTransport) || 0;
                    }
                } else {
                    transport = 0;
                }

                return { daily, meal, transport, total: daily + meal + transport + (shipFare || 0) };
            };

            const detailCosts = calculateDetailedCost();
            const isTransportDeducted = deductions.transport_proof || deductions.transport_gov_vehicle || deductions.transport_passenger;

            return (
                <div className="main-wrapper relative p-5">
                    {activeModal && (
                        <div 
                            className="fixed inset-0 z-[300] flex items-end justify-center sm:items-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200"
                            onClick={() => setActiveModal(null)}
                        >
                            <div className="bg-white w-full max-w-sm rounded-2xl overflow-hidden shadow-2xl animate-slide-up-modal" onClick={e => e.stopPropagation()}>
                                <div className="p-6">
                                    <div className="flex justify-between items-start mb-2">
                                        <h3 className="font-bold font-suit text-xl text-gray-900">{MODAL_CONTENT[activeModal].title}</h3>
                                        <button onClick={() => setActiveModal(null)} className="p-1 -mr-2 text-gray-400 hover:text-gray-600">
                                            <Icons.X size={20} />
                                        </button>
                                    </div>
                                    <p className="text-sm text-gray-600 font-pretendard leading-relaxed mb-2 break-keep font-medium">
                                        {MODAL_CONTENT[activeModal].desc}
                                    </p>
                                    {MODAL_CONTENT[activeModal].subDesc && (
                                        <div className="mb-6 p-3 bg-gray-50 rounded-lg border border-gray-100/50">
                                            <p className="text-[11px] text-gray-400 font-pretendard leading-relaxed break-keep">
                                                {MODAL_CONTENT[activeModal].subDesc}
                                            </p>
                                        </div>
                                    )}
                                    {activeModal === 'meal' && (
                                        <div className="mb-6 space-y-2 pl-1">
                                            {MODAL_CONTENT.meal.reasons.map((reason, idx) => (
                                                <div key={idx} className="flex items-start gap-2 text-sm text-gray-600 font-pretendard font-medium leading-relaxed">
                                                    <span className="mt-2 w-1 h-1 rounded-full bg-gray-400 flex-shrink-0"></span>
                                                    <div className="leading-snug">
                                                        {typeof reason === 'string' ? reason : (
                                                            <>
                                                                <div>{reason.text}</div>
                                                                <div className="text-gray-400 text-xs mt-0.5 font-normal">{reason.sub}</div>
                                                            </>
                                                        )}
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                    <div className={`${(activeModal !== 'meal' && !MODAL_CONTENT[activeModal].subDesc) ? 'mt-4' : ''} space-y-4`}>
                                        {MODAL_CONTENT[activeModal].items.map(item => (
                                            <div key={item.id} className="flex justify-between items-center py-3 border-b border-gray-100 last:border-0">
                                                <div className="pr-4">
                                                    <span className="block text-sm font-bold text-gray-700 font-pretendard leading-tight">{item.label}</span>
                                                    {item.subLabel && <span className="block text-xs text-gray-400 mt-1 font-pretendard">{item.subLabel}</span>}
                                                </div>
                                                <Toggle checked={deductions[item.id]} onChange={() => toggleDeduction(item.id)} />
                                            </div>
                                        ))}
                                    </div>
                                    <button 
                                        onClick={() => setActiveModal(null)}
                                        className="w-full mt-6 py-3.5 bg-teal-startup text-white rounded-xl font-bold font-suit text-base shadow-md active:scale-95 transition-transform"
                                    >
                                        í™•ì¸
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {modalState.type && (
                        <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200">
                            <div className="bg-white rounded-2xl w-full max-w-sm overflow-hidden shadow-2xl">
                                <div className="bg-teal-startup p-4 flex items-center justify-between text-white">
                                    <h2 className="font-bold font-suit text-lg">
                                        {modalState.type === 'selection' ? 'ê²€ìƒ‰ ê²°ê³¼ ì„ íƒ' : 'ì/ë©´ ì„ íƒ'}
                                    </h2>
                                    <button onClick={() => setModalState({ type: null, data: [] })}><Icons.X size={20} /></button>
                                </div>
                                <div className="p-5 max-h-[60vh] overflow-y-auto custom-scroll">
                                    {(modalState.type === 'origin' || modalState.type === 'destination') && (
                                        <div className="space-y-5">
                                            <div>
                                                <p className="text-xs font-bold text-teal-600 mb-2 uppercase tracking-wide font-pretendard">ì—°ë¥™ ì§€ì—­</p>
                                                <div className="grid grid-cols-4 gap-2">
                                                    {SHINAN_REGIONS.connected.map(name => (
                                                        <button key={name} onClick={() => handleModalSelect(name)} className="py-2.5 rounded-lg bg-gray-50 border border-gray-100 text-sm font-bold text-gray-700 hover:bg-teal-50 hover:text-teal-700 hover:border-teal-200 transition-all">{name}</button>
                                                    ))}
                                                </div>
                                            </div>
                                            <div>
                                                <p className="text-xs font-bold text-blue-600 mb-2 uppercase tracking-wide font-pretendard">ë„ì„œ ì§€ì—­</p>
                                                <div className="grid grid-cols-3 gap-2">
                                                    {SHINAN_REGIONS.islands.map(name => (
                                                        <button key={name} onClick={() => handleModalSelect(name)} className="py-2.5 rounded-lg bg-gray-50 border border-gray-100 text-sm font-bold text-gray-700 hover:bg-blue-50 hover:text-blue-700 hover:border-blue-200 transition-all">{name}</button>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    )}
                                    {modalState.type === 'selection' && (
                                        <div className="grid grid-cols-2 gap-2">
                                            {modalState.data.map(city => (
                                                <button key={city} onClick={() => handleModalSelect(city)} className="flex items-center justify-between px-4 py-3.5 rounded-xl bg-gray-50 border border-gray-100 text-sm font-bold text-gray-700 hover:bg-teal-50 hover:text-teal-700 hover:border-teal-200 transition-all">
                                                    <span>{city}</span>
                                                    {REGION_ICONS[city] && <span className="text-lg icon-wiggle">{REGION_ICONS[city]}</span>}
                                                </button>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="text-center mt-6 mb-8">
                        <div className="flex items-center justify-center gap-2">
                            <h1 className="text-2xl font-bold font-suit text-gray-900 tracking-tight">yeobi-easy for JNE</h1>
                            <span className="px-2 py-0.5 bg-teal-50 text-teal-600 text-[10px] font-bold rounded-full font-pretendard border border-teal-100/50">í™•ì¥íŒ</span>
                        </div>
                        <p className="text-[11px] text-gray-400 mt-2 font-pretendard">ì‹œì™¸ë²„ìŠ¤ ì¸ê°€ë‚´ì—­, êµ­í† êµí†µë¶€ ê³ ì†ë²„ìŠ¤ì •ë³´ API ê¸°ë°˜</p>
                    </div>

                    <div className="space-y-4 mb-6">
                        <AutocompleteInput label="ì¶œë°œì§€" placeholder="ì˜ˆ: ê´‘ì£¼ ë˜ëŠ” ã„±ã…ˆ" value={origin} onChange={setOrigin} onSelect={setOrigin} cityList={availableCities} onEnter={() => { if(destination) performCalculation(); }} onShowModal={(data) => setModalState({ type: 'selection', data, target: 'origin' })} />
                        <AutocompleteInput label="ë„ì°©ì§€" placeholder="ì˜ˆ: ì„œìš¸ ë˜ëŠ” ã……ã…‡" value={destination} onChange={setDestination} onSelect={setDestination} cityList={availableCities} onEnter={() => performCalculation()} onShowModal={(data) => setModalState({ type: 'selection', data, target: 'destination' })} />
                        <button 
                            onClick={() => performCalculation()} 
                            className="w-full h-14 rounded-2xl font-bold btn-primary text-base shadow-lg shadow-teal-100 flex items-center justify-center gap-2 mt-4"
                        >
                            <Icons.Search size={20} /> ì¡°íšŒí•˜ê¸°
                        </button>
                    </div>

                    {result && (
                        <div className="mb-6 relative perspective-1000" onTouchStart={onTouchStart} onTouchMove={onTouchMove} onTouchEnd={onTouchEnd}>
                            {!showDetail ? (
                                <div className="result-card p-6 animate-flip-in relative">
                                    <button 
                                        onClick={() => setShowDetail(true)}
                                        className="absolute top-4 right-4 w-10 h-10 bg-[#00BFA5] text-white rounded-full shadow-md border border-white/20 flex flex-col items-center justify-center gap-0 z-20 hover:brightness-110 transition-all active:scale-95 animate-pulse-scale"
                                    >
                                        <span className="text-[13px] font-bold leading-none">ì—¬ë¹„</span>
                                        <span className="text-[13px] font-bold leading-none mt-0.5">ê³„ì‚°</span>
                                    </button>

                                    <div className="flex items-center justify-center gap-3 mb-6 pb-6 border-b border-gray-200 border-dashed mt-4">
                                        <div className="flex items-center gap-1">
                                            <span className="font-semibold text-lg text-gray-900 font-pretendard">{origin}</span>
                                            {REGION_ICONS[origin] && <span className="text-lg inline-block ship-body">{REGION_ICONS[origin]}</span>}
                                        </div>
                                        <div className="flex flex-col items-center">
                                            {result.routeType === 'transfer' && (
                                                <span className="text-[10px] font-bold text-teal-600 bg-teal-50 px-2 py-0.5 rounded-full mb-1">{result.viaPoint} ê²½ìœ </span>
                                            )}
                                            <Icons.ArrowRight size={20} className="text-gray-300" />
                                        </div>
                                        <div className="flex items-center gap-1">
                                            <span className="font-semibold text-lg text-gray-900 font-pretendard">{destination}</span>
                                            {REGION_ICONS[destination] && <span className="text-lg inline-block ship-body">{REGION_ICONS[destination]}</span>}
                                        </div>
                                    </div>

                                    {result.type === 'intraCity' ? (
                                        <div className="space-y-3">
                                            <div className="flex items-center justify-between p-4 bg-white rounded-xl border border-gray-100 shadow-sm">
                                                <span className="text-sm font-medium text-gray-500 font-pretendard">4ì‹œê°„ ì´í•˜</span>
                                                <span className="text-xl font-bold font-suit text-gray-900">{fmt(result.short)}<span className="text-base font-medium text-gray-400 ml-1">ì›</span></span>
                                            </div>
                                            <div className="flex items-center justify-between p-4 bg-teal-50 rounded-xl border border-teal-100 shadow-sm">
                                                <span className="text-sm font-medium text-teal-700 font-pretendard">4ì‹œê°„ ì´ìƒ</span>
                                                <span className="text-2xl font-bold font-suit text-teal-600">{fmt(result.long)}<span className="text-lg font-medium text-teal-400 ml-1">ì›</span></span>
                                            </div>
                                            <div className="mt-4 flex items-start gap-2 bg-yellow-50 p-3 rounded-lg">
                                                <Icons.Info size={16} className="text-yellow-600 mt-0.5 flex-shrink-0" />
                                                <p className="text-xs text-yellow-700 font-pretendard leading-relaxed">{result.note}</p>
                                            </div>
                                        </div>
                                    ) : result.type === 'internal' ? (
                                        <div>
                                            {result.hideFare ? (
                                                <div className="text-center py-8">
                                                    <div className="w-12 h-12 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center mx-auto mb-3">
                                                        <Icons.Ship size={24} className="ship-body" />
                                                    </div>
                                                    <h3 className="font-bold text-gray-800 mb-1">ì—¬ê°ì„  ìš´í–‰ êµ¬ê°„</h3>
                                                    <p className="text-sm text-gray-500">ì„ ë°•ìš´ì„ì´ ì ìš©ë©ë‹ˆë‹¤.</p>
                                                </div>
                                            ) : (
                                                <div className="space-y-3">
                                                    {result.data.pre === null ? (
                                                        <div className="flex items-center justify-between p-4 bg-white rounded-xl border border-gray-100 shadow-sm">
                                                            <span className="text-sm font-medium text-gray-500 font-pretendard">ì¼ë°˜ ìš”ê¸ˆ</span>
                                                            <div className="flex items-center gap-1">
                                                                <span className="text-2xl font-bold font-suit text-gray-900">{fmt(result.data.gen)}</span>
                                                                <span className="text-base font-medium font-suit text-gray-400">ì›</span>
                                                                {result.hasShipCost && <span className="text-xs text-blue-500 font-bold ml-1 bg-blue-50 px-1.5 py-0.5 rounded">+ ì„ ë°•ìš´ì„</span>}
                                                            </div>
                                                        </div>
                                                    ) : (
                                                        <>
                                                            <div className="flex items-center justify-between p-4 bg-white rounded-xl border border-gray-100 shadow-sm">
                                                                <span className="text-sm font-medium text-gray-500 font-pretendard">ì¼ë°˜ ìš”ê¸ˆ</span>
                                                                <div className="flex items-center gap-1">
                                                                    <span className="text-xl font-bold font-suit text-gray-800">{fmt(result.data.gen)}</span>
                                                                    <span className="text-sm font-medium font-suit text-gray-400">ì›</span>
                                                                    {result.hasShipCost && <span className="text-xs text-blue-500 font-bold ml-1 bg-blue-50 px-1.5 py-0.5 rounded">+ ì„ ë°•ìš´ì„</span>}
                                                                </div>
                                                            </div>
                                                            <div className="flex items-center justify-between p-4 bg-teal-50 rounded-xl border border-teal-100 shadow-sm relative overflow-hidden">
                                                                <span className="text-sm font-medium text-teal-700 font-pretendard relative z-10">ìš°ë“± ìš”ê¸ˆ</span>
                                                                <div className="flex items-center gap-1 relative z-10">
                                                                    <span className="text-2xl font-bold font-suit text-teal-600">{fmt(result.data.pre)}</span>
                                                                    <span className="text-base font-medium font-suit text-teal-400">ì›</span>
                                                                    {result.hasShipCost && <span className="text-xs text-teal-600 font-bold ml-1 bg-white/50 px-1.5 py-0.5 rounded">+ ì„ ë°•ìš´ì„</span>}
                                                                </div>
                                                            </div>
                                                        </>
                                                    )}
                                                </div>
                                            )}
                                            
                                            <div className="mt-4 p-4 bg-teal-50 border border-teal-100 rounded-xl text-left">
                                                <div className="space-y-2">
                                                    <p className="text-xs text-teal-800 font-pretendard leading-relaxed">
                                                        <span className="font-bold text-teal-600 mr-1">1.</span>
                                                        <span className="font-bold">êµí†µë¹„</span>Â·<span className="font-bold">ìˆ™ë°•ë¹„</span>ëŠ” ì‹¤ë¹„ì •ì‚°ì œ â†’ <span className="font-bold">ì¦ë¹™</span> ì—†ìœ¼ë©´ ì •ì‚°X
                                                    </p>
                                                    <p className="text-xs text-teal-800 font-pretendard leading-relaxed">
                                                        <span className="font-bold text-teal-600 mr-1">2.</span>
                                                        ì—¬í–‰ì„ ë§ˆì¹œë‚ ë¡œë¶€í„° <span className="font-bold">2ì£¼ì¼ ì´ë‚´ì— ì •ì‚°ì„œ ì œì¶œ</span>
                                                        <span className="block text-[10px] text-teal-600/70 mt-0.5">ã€Œê³µë¬´ì›ì—¬ë¹„ê·œì •ã€ ì œ8ì¡°ì˜2(ì—¬ë¹„ì˜ ê²°ì œì™€ ì •ì‚° ë“±)</span>
                                                    </p>
                                                </div>
                                            </div>

                                            {(result.data.note || result.specialNote) && (
                                                <div className="mt-4 space-y-2">
                                                    {result.data.note && <p className="text-xs text-gray-500 font-pretendard bg-white px-3 py-2 rounded-lg border border-gray-100">* {result.data.note}</p>}
                                                    {result.specialNote && (
                                                        <div className="flex items-start gap-2 bg-yellow-50 p-3 rounded-lg border border-yellow-100/50">
                                                            <Icons.Info size={14} className="text-yellow-600 mt-0.5 flex-shrink-0" />
                                                            <p className="text-xs text-yellow-700 font-pretendard">{result.specialNote}</p>
                                                        </div>
                                                    )}
                                                </div>
                                            )}
                                            
                                            <div className="mt-5 pt-4 border-t border-gray-200 flex items-center justify-center gap-1.5 opacity-60 hover:opacity-100 transition-opacity">
                                                <Icons.Database size={12} className="text-gray-400" />
                                                <span className="text-[11px] text-gray-400 font-pretendard">ì¶œì²˜: {result.source}</span>
                                            </div>
                                        </div>
                                    ) : (
                                        <div className="text-center py-6">
                                            <Icons.Globe size={32} className="mx-auto mb-3 text-gray-300" />
                                            <h3 className="text-base font-bold text-gray-800 mb-1">DB ë¯¸ë“±ë¡ êµ¬ê°„</h3>
                                            <p className="text-xs text-gray-500 mb-4">ì…ë ¥í•˜ì‹  êµ¬ê°„ì˜ ìš”ê¸ˆ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                                            <a href="https://map.kakao.com/?target=car" target="_blank" rel="noopener noreferrer" className="inline-flex items-center justify-center gap-2 px-5 py-2.5 rounded-xl bg-[#FEE500] text-[#191919] font-bold text-sm shadow-sm active:scale-95 transition-transform">
                                                ì¹´ì¹´ì˜¤ë§µ ê¸¸ì°¾ê¸°
                                            </a>
                                        </div>
                                    )}
                                </div>
                            ) : (
                                <div className="result-card p-6 bg-white animate-flip-in relative border-2 border-teal-500/10">
                                    <button 
                                        onClick={() => setShowDetail(false)}
                                        className="absolute top-4 left-4 w-10 h-10 bg-[#00BFA5] text-white rounded-full shadow-md border border-white/20 flex items-center justify-center z-20 hover:brightness-110 transition-all active:scale-95 animate-pulse-scale"
                                    >
                                        <Icons.ChevronLeft size={24} />
                                    </button>

                                    <div className="text-center mb-6 mt-8">
                                        <h3 className="font-bold font-suit text-xl text-teal-600 flex items-center justify-center gap-2">
                                            <Icons.Calculator size={20} /> ì—¬ë¹„ê³„ì‚°
                                        </h3>
                                        <p className="text-sm text-gray-500 mt-2 font-pretendard">
                                            ì¶œì¥ìê°€ {origin} â†” {destination} {deductions.gov_vehicle || intraDeductions.govVehicle ? 'ê´€ìš©ì°¨ëŸ‰ìœ¼ë¡œ' : 'ìê°€ìš©ìœ¼ë¡œ'} ë‹¹ì¼ ì™•ë³µí•œ ê²½ìš°
                                        </p>
                                    </div>

                                    <div className="space-y-2 mb-4 bg-gray-50 p-4 rounded-xl border border-gray-100">
                                        {result.type === 'intraCity' ? (
                                            <>
                                                <div className="flex justify-between items-center py-2 border-b border-gray-200 mb-2">
                                                    <span className="text-sm font-bold text-gray-900 font-pretendard">ê´€ë‚´ì—¬ë¹„</span>
                                                    <span className="text-xl font-bold font-suit text-gray-700">{fmt(detailCosts.total)}<span className="text-xs font-normal text-gray-400 ml-0.5">ì›</span></span>
                                                </div>
                                                <div className="space-y-3">
                                                    <div className="flex justify-between items-center">
                                                        <span className="text-sm font-bold text-gray-600 font-pretendard">4ì‹œê°„ ì´í•˜</span>
                                                        <button 
                                                            onClick={() => setIntraDeductions(prev => ({...prev, shortTime: !prev.shortTime}))}
                                                            className={`px-3 py-1.5 text-xs font-bold rounded-lg transition-all active:scale-95 ${intraDeductions.shortTime ? 'bg-[#00BFA5] text-white shadow-sm' : 'text-teal-600 bg-teal-50/50 border border-teal-200 hover:bg-teal-100'}`}
                                                        >
                                                            ê°ì•¡
                                                        </button>
                                                    </div>
                                                    <div className="flex justify-between items-center">
                                                        <span className="text-sm font-bold text-gray-600 font-pretendard">ê´€ìš©ì°¨ëŸ‰ ì´ìš©</span>
                                                        <button 
                                                            onClick={() => setIntraDeductions(prev => ({...prev, govVehicle: !prev.govVehicle}))}
                                                            className={`px-3 py-1.5 text-xs font-bold rounded-lg transition-all active:scale-95 ${intraDeductions.govVehicle ? 'bg-[#00BFA5] text-white shadow-sm' : 'text-teal-600 bg-teal-50/50 border border-teal-200 hover:bg-teal-100'}`}
                                                        >
                                                            ê°ì•¡
                                                        </button>
                                                    </div>
                                                </div>
                                            </>
                                        ) : (
                                            <>
                                                <div className="flex justify-between items-center py-1">
                                                    <div className="flex items-center gap-2">
                                                        <span className="text-sm font-bold text-gray-600 font-pretendard w-10">ì¼ë¹„</span>
                                                        <button 
                                                            onClick={() => setActiveModal('daily')}
                                                            className={`px-3 py-1.5 text-xs font-bold rounded-lg transition-all active:scale-95 ${deductions.gov_vehicle ? 'bg-[#00BFA5] text-white shadow-sm' : 'text-teal-600 bg-teal-50/50 border border-teal-200 hover:bg-teal-100'}`}
                                                        >
                                                            ê°ì•¡
                                                        </button>
                                                    </div>
                                                    <span className="text-sm font-bold font-suit text-gray-700">{fmt(detailCosts.daily)}<span className="text-xs font-normal text-gray-400 ml-0.5">ì›</span></span>
                                                </div>
                                                
                                                <div className="flex justify-between items-start py-1">
                                                    <div className="flex items-center gap-2 mt-0.5">
                                                        <span className="text-sm font-bold text-gray-600 font-pretendard w-10">ì‹ë¹„</span>
                                                        <button 
                                                            onClick={() => setActiveModal('meal')}
                                                            className={`px-3 py-1.5 text-xs font-bold rounded-lg transition-all active:scale-95 ${(deductions.meal_1 || deductions.meal_2 || deductions.meal_3 || deductions.meal_half) ? 'bg-[#00BFA5] text-white shadow-sm' : 'text-teal-600 bg-teal-50/50 border border-teal-200 hover:bg-teal-100'}`}
                                                        >
                                                            ê°ì•¡
                                                        </button>
                                                    </div>
                                                    <div className="flex flex-col items-end">
                                                        <span className="text-sm font-bold font-suit text-gray-700">{fmt(detailCosts.meal)}<span className="text-xs font-normal text-gray-400 ml-0.5">ì›</span></span>
                                                        {(25000 - detailCosts.meal > 0) && <span className="block text-[11px] text-red-400 font-pretendard mt-0.5">(-{fmt(25000 - detailCosts.meal)})</span>}
                                                    </div>
                                                </div>
                                                
                                                <div className="flex justify-between items-start py-1">
                                                    <div className="flex items-center gap-2">
                                                        <span className="text-sm font-bold text-gray-600 font-pretendard w-10">êµí†µë¹„</span>
                                                        <button 
                                                            onClick={() => setActiveModal('transport')}
                                                            className={`px-3 py-1.5 text-xs font-bold rounded-lg transition-all active:scale-95 ${isTransportDeducted ? 'bg-[#00BFA5] text-white shadow-sm' : 'text-teal-600 bg-teal-50/50 border border-teal-200 hover:bg-teal-100'}`}
                                                        >
                                                            ê°ì•¡
                                                        </button>
                                                        {result.type === 'external' && (
                                                            <a 
                                                                href={`https://map.kakao.com/?target=car`} 
                                                                target="_blank" rel="noopener noreferrer"
                                                                className="px-2 py-1.5 text-[11px] font-bold rounded-lg bg-[#FEE500] text-[#191919] hover:brightness-95 transition-all shadow-sm whitespace-nowrap"
                                                            >
                                                                ì¹´ì¹´ì˜¤ë§µê²€ìƒ‰
                                                            </a>
                                                        )}
                                                    </div>
                                                    <div className="flex flex-col items-end">
                                                        {result.type === 'external' && !isTransportDeducted ? (
                                                            <div className="flex items-center justify-end gap-1 w-full max-w-[100px]">
                                                                <input 
                                                                    type="number" 
                                                                    value={customTransport === '' ? '' : customTransport} 
                                                                    onChange={(e) => setCustomTransport(e.target.value)}
                                                                    placeholder="0"
                                                                    className="ship-fare-input w-full text-right"
                                                                />
                                                                <span className="text-xs font-normal text-gray-400">ì›</span>
                                                            </div>
                                                        ) : (
                                                            <span className="text-sm font-bold font-suit text-gray-700 mt-1">{fmt(detailCosts.transport)}<span className="text-xs font-normal text-gray-400 ml-0.5">ì›</span></span>
                                                        )}
                                                    </div>
                                                </div>

                                                {((result.type === 'internal' && (result.hasShipCost || result.startIsShip || result.endIsShip)) || result.type === 'external') && (
                                                    <div className="flex justify-between items-start py-1">
                                                        <div className="flex items-center gap-2 mt-1">
                                                            <span className="text-sm font-bold text-gray-600 font-pretendard w-16">ê¸°íƒ€êµí†µë¹„</span>
                                                        </div>
                                                        <div className="flex flex-col items-end">
                                                            <div className="flex items-center justify-end gap-1">
                                                                <input 
                                                                    type="number" 
                                                                    value={shipFare === 0 ? '' : shipFare} 
                                                                    onChange={(e) => setShipFare(Number(e.target.value))}
                                                                    placeholder="0"
                                                                    className="ship-fare-input"
                                                                />
                                                                <span className="text-xs font-normal text-gray-400">ì›</span>
                                                            </div>
                                                            <span className="text-[10px] font-bold text-blue-500 font-pretendard mt-0.5">ìŠ¹ì„ ê¶Œ ë“± í•©ê³„ ì…ë ¥</span>
                                                        </div>
                                                    </div>
                                                )}

                                                <div className="border-t border-gray-200 my-2"></div>
                                                <div className="flex justify-between items-center pt-1">
                                                    <span className="text-sm font-bold text-gray-900 font-pretendard">í•©ê³„</span>
                                                    <span className="text-xl font-bold font-suit text-teal-600">{fmt(detailCosts.total)}<span className="text-sm font-medium text-teal-400 ml-1">ì›</span></span>
                                                </div>
                                            </>
                                        )}
                                    </div>

                                    <div className="mt-5 space-y-2">
                                        <div className="flex items-start gap-1.5">
                                            <span className="text-xs text-red-500 mt-0.5 font-bold">â€»</span>
                                            <p className="text-xs text-red-600 font-bold font-pretendard leading-tight">ë‹¨ì²´í–‰ì‚¬ ì¸ì†” ì‹œ ì˜ˆì‚°ìœ¼ë¡œ ìˆ™ë°•Â·ì‹ì‚¬ê³„ì•½ ì²´ê²°ëœ ê²½ìš° ì£¼ì˜</p>
                                        </div>
                                        <div className="flex items-start gap-1.5">
                                            <span className="text-xs text-gray-600 mt-0.5">â€»</span>
                                            <p className="text-xs text-gray-600 font-pretendard leading-tight">ì—¬ê°ì„ ì„ ì´ìš©í•œ ê²½ìš°, ìŠ¹ì„ ê¶Œ í•©ê³„ê¸ˆì•¡ì„ ê¸°íƒ€êµí†µë¹„ì— ì…ë ¥</p>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    )}

                    <footer className="mt-0.5 text-center text-gray-400/30 text-[10px] font-extrabold leading-relaxed font-gmarket mb-4 tracking-wide px-4">
                        crafted with passion for KOREA
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
